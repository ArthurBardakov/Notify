import{e as di,k as ci,l as Ae,m as ui,n as hi,o as it}from"./chunk-ABCWXAW7.js";import{c as fi,d as Mt,f as ae,g as Tt,h as Pt,i as ze,j as Nt}from"./chunk-F7MGRRIG.js";import{a as kt,k as li,l as St,m as et,o as tt}from"./chunk-NQPD47JQ.js";import{$ as K,$b as ii,Aa as Yt,Ac as ee,Bb as Et,Bc as te,Ca as j,Fb as A,Ga as Xt,Gb as M,Ha as re,Hb as R,Ib as Ee,Jb as we,Kb as H,Nb as T,Ob as F,Sb as Le,Tb as Be,Ub as Re,Vb as he,Wb as He,Xb as wt,Ya as yt,Yb as G,Z as Ie,Za as Je,Zb as At,_ as me,_a as Ct,_b as Dt,a as E,ab as D,ac as ni,b as L,ba as pe,bb as P,bc as oi,d as rn,da as Ve,e as sn,ea as ye,f as Ut,fb as Zt,fc as ge,gc as je,hb as xt,hc as Ft,ia as oe,ja as $,ka as z,l as qt,lb as Jt,mb as Ce,mc as ri,nb as ce,o as Wt,pb as ei,pc as si,qb as xe,sa as Oe,t as Gt,ta as I,ua as V,ub as W,uc as ve,va as Xe,wa as $t,wb as k,xa as Qt,xb as ue,yb as se,z as Kt,za as Ze,zb as ti,zc as ai}from"./chunk-N7K2CRMW.js";var Qi=rn((mt,ft)=>{"use strict";"classList"in document.createElement("_")||function(i){"use strict";if("Element"in i){var n="classList",e="prototype",t=i.Element[e],o=Object,a=String[e].trim||function(){return this.replace(/^\s+|\s+$/g,"")},d=Array[e].indexOf||function(g){for(var v=0,b=this.length;v<b;v++)if(v in this&&this[v]===g)return v;return-1},r=function(g,v){this.name=g,this.code=DOMException[g],this.message=v},s=function(g,v){if(v==="")throw new r("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(v))throw new r("INVALID_CHARACTER_ERR","String contains an invalid character");return d.call(g,v)},l=function(g){for(var v=a.call(g.getAttribute("class")||""),b=v?v.split(/\s+/):[],y=0,x=b.length;y<x;y++)this.push(b[y]);this._updateClassName=function(){g.setAttribute("class",this.toString())}},u=l[e]=[],h=function(){return new l(this)};if(r[e]=Error[e],u.item=function(g){return this[g]||null},u.contains=function(g){return g+="",s(this,g)!==-1},u.add=function(){var g=arguments,v=0,b=g.length,y,x=!1;do y=g[v]+"",s(this,y)===-1&&(this.push(y),x=!0);while(++v<b);x&&this._updateClassName()},u.remove=function(){var g=arguments,v=0,b=g.length,y,x=!1,N;do for(y=g[v]+"",N=s(this,y);N!==-1;)this.splice(N,1),x=!0,N=s(this,y);while(++v<b);x&&this._updateClassName()},u.toggle=function(g,v){g+="";var b=this.contains(g),y=b?v!==!0&&"remove":v!==!1&&"add";return y&&this[y](g),v===!0||v===!1?v:!b},u.toString=function(){return this.join(" ")},o.defineProperty){var f={get:h,enumerable:!0,configurable:!0};try{o.defineProperty(t,n,f)}catch(g){g.number===-2146823252&&(f.enumerable=!1,o.defineProperty(t,n,f))}}else o[e].__defineGetter__&&t.__defineGetter__(n,h)}}(self);(function(i){"use strict";if(i.URL=i.URL||i.webkitURL,i.Blob&&i.URL)try{new Blob;return}catch{}var n=i.BlobBuilder||i.WebKitBlobBuilder||i.MozBlobBuilder||function(t){var o=function(C){return Object.prototype.toString.call(C).match(/^\[object\s(.*)\]$/)[1]},a=function(){this.data=[]},d=function(O,B,Z){this.data=O,this.size=O.length,this.type=B,this.encoding=Z},r=a.prototype,s=d.prototype,l=t.FileReaderSync,u=function(C){this.code=this[this.name=C]},h="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),f=h.length,g=t.URL||t.webkitURL||t,v=g.createObjectURL,b=g.revokeObjectURL,y=g,x=t.btoa,N=t.atob,U=t.ArrayBuffer,ne=t.Uint8Array,bt=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(d.fake=s.fake=!0;f--;)u.prototype[h[f]]=f+1;return g.createObjectURL||(y=t.URL=function(C){var O=document.createElementNS("http://www.w3.org/1999/xhtml","a"),B;return O.href=C,"origin"in O||(O.protocol.toLowerCase()==="data:"?O.origin=null:(B=C.match(bt),O.origin=B&&B[1])),O}),y.createObjectURL=function(C){var O=C.type,B;if(O===null&&(O="application/octet-stream"),C instanceof d)return B="data:"+O,C.encoding==="base64"?B+";base64,"+C.data:C.encoding==="URI"?B+","+decodeURIComponent(C.data):x?B+";base64,"+x(C.data):B+","+encodeURIComponent(C.data);if(v)return v.call(g,C)},y.revokeObjectURL=function(C){C.substring(0,5)!=="data:"&&b&&b.call(g,C)},r.append=function(C){var O=this.data;if(ne&&(C instanceof U||C instanceof ne)){for(var B="",Z=new ne(C),Me=0,Te=Z.length;Me<Te;Me++)B+=String.fromCharCode(Z[Me]);O.push(B)}else if(o(C)==="Blob"||o(C)==="File")if(l){var c=new l;O.push(c.readAsBinaryString(C))}else throw new u("NOT_READABLE_ERR");else C instanceof d?C.encoding==="base64"&&N?O.push(N(C.data)):C.encoding==="URI"?O.push(decodeURIComponent(C.data)):C.encoding==="raw"&&O.push(C.data):(typeof C!="string"&&(C+=""),O.push(unescape(encodeURIComponent(C))))},r.getBlob=function(C){return arguments.length||(C=null),new d(this.data.join(""),C,"raw")},r.toString=function(){return"[object BlobBuilder]"},s.slice=function(C,O,B){var Z=arguments.length;return Z<3&&(B=null),new d(this.data.slice(C,Z>1?O:this.data.length),B,this.encoding)},s.toString=function(){return"[object Blob]"},s.close=function(){this.size=0,delete this.data},a}(i);i.Blob=function(t,o){var a=o&&o.type||"",d=new n;if(t)for(var r=0,s=t.length;r<s;r++)Uint8Array&&t[r]instanceof Uint8Array?d.append(t[r].buffer):d.append(t[r]);var l=d.getBlob(a);return!l.slice&&l.webkitSlice&&(l.slice=l.webkitSlice),l};var e=Object.getPrototypeOf||function(t){return t.__proto__};i.Blob.prototype=e(new i.Blob)})(typeof self<"u"&&self||typeof window<"u"&&window||mt.content||mt);(function(i,n){"use strict";var e=typeof ft=="object"&&typeof process<"u"&&process&&process.versions&&process.versions.electron;!e&&typeof ft=="object"?ft.exports=n:typeof define=="function"&&define.amd?define(function(){return n}):i.MediumEditor=n})(mt,function(){"use strict";function i(n,e){"use strict";return this.init(n,e)}return i.extensions={},function(n){"use strict";function e(r,s){var l,u=Array.prototype.slice.call(arguments,2);s=s||{};for(var h=0;h<u.length;h++){var f=u[h];if(f)for(l in f)f.hasOwnProperty(l)&&typeof f[l]<"u"&&(r||s.hasOwnProperty(l)===!1)&&(s[l]=f[l])}return s}var t=!1;try{var o=document.createElement("div"),a=document.createTextNode(" ");o.appendChild(a),t=o.contains(a)}catch{}var d={isIE:navigator.appName==="Microsoft Internet Explorer"||navigator.appName==="Netscape"&&new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)!==null,isEdge:/Edge\/\d+/.exec(navigator.userAgent)!==null,isFF:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,isMac:n.navigator.platform.toUpperCase().indexOf("MAC")>=0,keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,K:75,M:77,V:86},isMetaCtrlKey:function(r){return!!(d.isMac&&r.metaKey||!d.isMac&&r.ctrlKey)},isKey:function(r,s){var l=d.getKeyCode(r);return Array.isArray(s)===!1?l===s:s.indexOf(l)!==-1},getKeyCode:function(r){var s=r.which;return s===null&&(s=r.charCode!==null?r.charCode:r.keyCode),s},blockContainerElementNames:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","li","ol","address","article","aside","audio","canvas","dd","dl","dt","fieldset","figcaption","figure","footer","form","header","hgroup","main","nav","noscript","output","section","video","table","thead","tbody","tfoot","tr","th","td"],emptyElementNames:["br","col","colgroup","hr","img","input","source","wbr"],extend:function(){var s=[!0].concat(Array.prototype.slice.call(arguments));return e.apply(this,s)},defaults:function(){var s=[!1].concat(Array.prototype.slice.call(arguments));return e.apply(this,s)},createLink:function(r,s,l,u){var h=r.createElement("a");return d.moveTextRangeIntoElement(s[0],s[s.length-1],h),h.setAttribute("href",l),u&&(u==="_blank"&&h.setAttribute("rel","noopener noreferrer"),h.setAttribute("target",u)),h},findOrCreateMatchingTextNodes:function(r,s,l){for(var u=r.createTreeWalker(s,NodeFilter.SHOW_ALL,null,!1),h=[],f=0,g=!1,v=null,b=null;(v=u.nextNode())!==null;)if(!(v.nodeType>3))if(v.nodeType===3){if(!g&&l.start<f+v.nodeValue.length&&(g=!0,b=d.splitStartNodeIfNeeded(v,l.start,f)),g&&d.splitEndNodeIfNeeded(v,b,l.end,f),g&&f===l.end)break;if(g&&f>l.end+1)throw new Error("PerformLinking overshot the target!");g&&h.push(b||v),f+=v.nodeValue.length,b!==null&&(f+=b.nodeValue.length,u.nextNode()),b=null}else v.tagName.toLowerCase()==="img"&&(!g&&l.start<=f&&(g=!0),g&&h.push(v));return h},splitStartNodeIfNeeded:function(r,s,l){return s!==l?r.splitText(s-l):null},splitEndNodeIfNeeded:function(r,s,l,u){var h,f;h=u+r.nodeValue.length+(s?s.nodeValue.length:0)-1,f=l-u-(s?r.nodeValue.length:0),h>=l&&u!==h&&f!==0&&(s||r).splitText(f)},splitByBlockElements:function(r){if(r.nodeType!==3&&r.nodeType!==1)return[];var s=[],l=i.util.blockContainerElementNames.join(",");if(r.nodeType===3||r.querySelectorAll(l).length===0)return[r];for(var u=0;u<r.childNodes.length;u++){var h=r.childNodes[u];if(h.nodeType===3)s.push(h);else if(h.nodeType===1){var f=h.querySelectorAll(l);f.length===0?s.push(h):s=s.concat(i.util.splitByBlockElements(h))}}return s},findAdjacentTextNodeWithContent:function(s,l,u){var h=!1,f,g=u.createNodeIterator(s,NodeFilter.SHOW_TEXT,null,!1);for(f=g.nextNode();f;){if(f===l)h=!0;else if(h&&f.nodeType===3&&f.nodeValue&&f.nodeValue.trim().length>0)break;f=g.nextNode()}return f},findPreviousSibling:function(r){if(!r||d.isMediumEditorElement(r))return!1;for(var s=r.previousSibling;!s&&!d.isMediumEditorElement(r.parentNode);)r=r.parentNode,s=r.previousSibling;return s},isDescendant:function(s,l,u){if(!s||!l)return!1;if(s===l)return!!u;if(s.nodeType!==1)return!1;if(t||l.nodeType!==3)return s.contains(l);for(var h=l.parentNode;h!==null;){if(h===s)return!0;h=h.parentNode}return!1},isElement:function(s){return!!(s&&s.nodeType===1)},throttle:function(r,s){var l=50,u,h,f,g=null,v=0,b=function(){v=Date.now(),g=null,f=r.apply(u,h),g||(u=h=null)};return!s&&s!==0&&(s=l),function(){var y=Date.now(),x=s-(y-v);return u=this,h=arguments,x<=0||x>s?(g&&(clearTimeout(g),g=null),v=y,f=r.apply(u,h),g||(u=h=null)):g||(g=setTimeout(b,x)),f}},traverseUp:function(r,s){if(!r)return!1;do{if(r.nodeType===1){if(s(r))return r;if(d.isMediumEditorElement(r))return!1}r=r.parentNode}while(r);return!1},htmlEntities:function(r){return String(r).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(r,s){var l,u,h,f,g,v,b,y=!1,x=["insertHTML",!1,s];if(!i.util.isEdge&&r.queryCommandSupported("insertHTML"))try{return r.execCommand.apply(r,x)}catch{}if(l=r.getSelection(),l.rangeCount){if(u=l.getRangeAt(0),b=u.commonAncestorContainer,d.isMediumEditorElement(b)&&!b.firstChild)u.selectNode(b.appendChild(r.createTextNode("")));else if(b.nodeType===3&&u.startOffset===0&&u.endOffset===b.nodeValue.length||b.nodeType!==3&&b.innerHTML===u.toString()){for(;!d.isMediumEditorElement(b)&&b.parentNode&&b.parentNode.childNodes.length===1&&!d.isMediumEditorElement(b.parentNode);)b=b.parentNode;u.selectNode(b)}for(u.deleteContents(),h=r.createElement("div"),h.innerHTML=s,f=r.createDocumentFragment();h.firstChild;)g=h.firstChild,v=f.appendChild(g);u.insertNode(f),v&&(u=u.cloneRange(),u.setStartAfter(v),u.collapse(!0),i.selection.selectRange(r,u)),y=!0}return r.execCommand.callListeners&&r.execCommand.callListeners(x,y),y},execFormatBlock:function(r,s){var l=d.getTopBlockContainer(i.selection.getSelectionStart(r)),u;if(s==="blockquote"){if(l&&(u=Array.prototype.slice.call(l.childNodes),u.some(function(h){return d.isBlockContainer(h)})))return r.execCommand("outdent",!1,null);if(d.isIE)return r.execCommand("indent",!1,s)}if(l&&s===l.nodeName.toLowerCase()&&(s="p"),d.isIE&&(s="<"+s+">"),l&&l.nodeName.toLowerCase()==="blockquote"){if(d.isIE&&s==="<p>")return r.execCommand("outdent",!1,s);if((d.isFF||d.isEdge)&&s==="p")return u=Array.prototype.slice.call(l.childNodes),u.some(function(h){return!d.isBlockContainer(h)})&&r.execCommand("formatBlock",!1,s),r.execCommand("outdent",!1,s)}return r.execCommand("formatBlock",!1,s)},setTargetBlank:function(r,s){var l,u=s||!1;if(r.nodeName.toLowerCase()==="a")r.target="_blank",r.rel="noopener noreferrer";else for(r=r.getElementsByTagName("a"),l=0;l<r.length;l+=1)(u===!1||u===r[l].attributes.href.value)&&(r[l].target="_blank",r[l].rel="noopener noreferrer")},removeTargetBlank:function(r,s){var l;if(r.nodeName.toLowerCase()==="a")r.removeAttribute("target"),r.removeAttribute("rel");else for(r=r.getElementsByTagName("a"),l=0;l<r.length;l+=1)s===r[l].attributes.href.value&&(r[l].removeAttribute("target"),r[l].removeAttribute("rel"))},addClassToAnchors:function(r,s){var l=s.split(" "),u,h;if(r.nodeName.toLowerCase()==="a")for(h=0;h<l.length;h+=1)r.classList.add(l[h]);else{var f=r.getElementsByTagName("a");if(f.length===0){var g=d.getClosestTag(r,"a");r=g?[g]:[]}else r=f;for(u=0;u<r.length;u+=1)for(h=0;h<l.length;h+=1)r[u].classList.add(l[h])}},isListItem:function(r){if(!r)return!1;if(r.nodeName.toLowerCase()==="li")return!0;for(var s=r.parentNode,l=s.nodeName.toLowerCase();l==="li"||!d.isBlockContainer(s)&&l!=="div";){if(l==="li")return!0;if(s=s.parentNode,s)l=s.nodeName.toLowerCase();else return!1}return!1},cleanListDOM:function(r,s){if(s.nodeName.toLowerCase()==="li"){var l=s.parentElement;l.parentElement.nodeName.toLowerCase()==="p"&&(d.unwrap(l.parentElement,r),i.selection.moveCursor(r,s.firstChild,s.firstChild.textContent.length))}},splitOffDOMTree:function(r,s,l){for(var u=s,h=null,f=!l;u!==r;){var g=u.parentNode,v=g.cloneNode(!1),b=f?u:g.firstChild,y;for(h&&(f?v.appendChild(h):y=h),h=v;b;){var x=b.nextSibling;b===u?(b.hasChildNodes()?b=b.cloneNode(!1):b.parentNode.removeChild(b),b.textContent&&h.appendChild(b),b=f?x:null):(b.parentNode.removeChild(b),(b.hasChildNodes()||b.textContent)&&h.appendChild(b),b=x)}y&&h.appendChild(y),u=g}return h},moveTextRangeIntoElement:function(r,s,l){if(!r||!s)return!1;var u=d.findCommonRoot(r,s);if(!u)return!1;if(s===r){var h=r.parentNode,f=r.nextSibling;return h.removeChild(r),l.appendChild(r),f?h.insertBefore(l,f):h.appendChild(l),l.hasChildNodes()}for(var g=[],v,b,y,x=0;x<u.childNodes.length;x++)if(y=u.childNodes[x],!v)d.isDescendant(y,r,!0)&&(v=y);else if(d.isDescendant(y,s,!0)){b=y;break}else g.push(y);var N=b.nextSibling,U=u.ownerDocument.createDocumentFragment();return v===r?(v.parentNode.removeChild(v),U.appendChild(v)):U.appendChild(d.splitOffDOMTree(v,r)),g.forEach(function(ne){ne.parentNode.removeChild(ne),U.appendChild(ne)}),b===s?(b.parentNode.removeChild(b),U.appendChild(b)):U.appendChild(d.splitOffDOMTree(b,s,!0)),l.appendChild(U),b.parentNode===u?u.insertBefore(l,b):N?u.insertBefore(l,N):u.appendChild(l),l.hasChildNodes()},depthOfNode:function(r){for(var s=0,l=r;l.parentNode!==null;)l=l.parentNode,s++;return s},findCommonRoot:function(r,s){for(var l=d.depthOfNode(r),u=d.depthOfNode(s),h=r,f=s;l!==u;)l>u?(h=h.parentNode,l-=1):(f=f.parentNode,u-=1);for(;h!==f;)h=h.parentNode,f=f.parentNode;return h},isElementAtBeginningOfBlock:function(r){for(var s,l;!d.isBlockContainer(r)&&!d.isMediumEditorElement(r);){for(l=r;l=l.previousSibling;)if(s=l.nodeType===3?l.nodeValue:l.textContent,s.length>0)return!1;r=r.parentNode}return!0},isMediumEditorElement:function(r){return r&&r.getAttribute&&!!r.getAttribute("data-medium-editor-element")},getContainerEditorElement:function(r){return d.traverseUp(r,function(s){return d.isMediumEditorElement(s)})},isBlockContainer:function(r){return r&&r.nodeType!==3&&d.blockContainerElementNames.indexOf(r.nodeName.toLowerCase())!==-1},getClosestBlockContainer:function(r){return d.traverseUp(r,function(s){return d.isBlockContainer(s)||d.isMediumEditorElement(s)})},getTopBlockContainer:function(r){var s=d.isBlockContainer(r)?r:!1;return d.traverseUp(r,function(l){return d.isBlockContainer(l)&&(s=l),!s&&d.isMediumEditorElement(l)?(s=l,!0):!1}),s},getFirstSelectableLeafNode:function(r){for(;r&&r.firstChild;)r=r.firstChild;if(r=d.traverseUp(r,function(l){return d.emptyElementNames.indexOf(l.nodeName.toLowerCase())===-1}),r.nodeName.toLowerCase()==="table"){var s=r.querySelector("th, td");s&&(r=s)}return r},getFirstTextNode:function(r){return d.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0"),d._getFirstTextNode(r)},_getFirstTextNode:function(r){if(r.nodeType===3)return r;for(var s=0;s<r.childNodes.length;s++){var l=d._getFirstTextNode(r.childNodes[s]);if(l!==null)return l}return null},ensureUrlHasProtocol:function(r){return r.indexOf("://")===-1?"http://"+r:r},warn:function(){n.console!==void 0&&typeof n.console.warn=="function"&&n.console.warn.apply(n.console,arguments)},deprecated:function(r,s,l){var u=r+" is deprecated, please use "+s+" instead.";l&&(u+=" Will be removed in "+l),d.warn(u)},deprecatedMethod:function(r,s,l,u){d.deprecated(r,s,u),typeof this[s]=="function"&&this[s].apply(this,l)},cleanupAttrs:function(r,s){s.forEach(function(l){r.removeAttribute(l)})},cleanupTags:function(r,s){s.indexOf(r.nodeName.toLowerCase())!==-1&&r.parentNode.removeChild(r)},unwrapTags:function(r,s){s.indexOf(r.nodeName.toLowerCase())!==-1&&i.util.unwrap(r,document)},getClosestTag:function(r,s){return d.traverseUp(r,function(l){return l.nodeName.toLowerCase()===s.toLowerCase()})},unwrap:function(r,s){for(var l=s.createDocumentFragment(),u=Array.prototype.slice.call(r.childNodes),h=0;h<u.length;h++)l.appendChild(u[h]);l.childNodes.length?r.parentNode.replaceChild(l,r):r.parentNode.removeChild(r)},guid:function(){function r(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r()}};i.util=d}(window),function(){"use strict";var n=function(e){i.util.extend(this,e)};n.extend=function(e){var t=this,o;e&&e.hasOwnProperty("constructor")?o=e.constructor:o=function(){return t.apply(this,arguments)},i.util.extend(o,t);var a=function(){this.constructor=o};return a.prototype=t.prototype,o.prototype=new a,e&&i.util.extend(o.prototype,e),o},n.prototype={init:function(){},base:void 0,name:void 0,checkState:void 0,destroy:void 0,queryCommandState:void 0,isActive:void 0,isAlreadyApplied:void 0,setActive:void 0,setInactive:void 0,getInteractionElements:void 0,window:void 0,document:void 0,getEditorElements:function(){return this.base.elements},getEditorId:function(){return this.base.id},getEditorOption:function(e){return this.base.options[e]}},["execAction","on","off","subscribe","trigger"].forEach(function(e){n.prototype[e]=function(){return this.base[e].apply(this.base,arguments)}}),i.Extension=n}(),function(){"use strict";function n(t){return i.util.isBlockContainer(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}var e={findMatchingSelectionParent:function(t,o){var a=o.getSelection(),d,r;return a.rangeCount===0?!1:(d=a.getRangeAt(0),r=d.commonAncestorContainer,i.util.traverseUp(r,t))},getSelectionElement:function(t){return this.findMatchingSelectionParent(function(o){return i.util.isMediumEditorElement(o)},t)},exportSelection:function(t,o){if(!t)return null;var a=null,d=o.getSelection();if(d.rangeCount>0){var r=d.getRangeAt(0),s=r.cloneRange(),l;s.selectNodeContents(t),s.setEnd(r.startContainer,r.startOffset),l=s.toString().length,a={start:l,end:l+r.toString().length},this.doesRangeStartWithImages(r,o)&&(a.startsWithImage=!0);var u=this.getTrailingImageCount(t,a,r.endContainer,r.endOffset);if(u&&(a.trailingImageCount=u),l!==0){var h=this.getIndexRelativeToAdjacentEmptyBlocks(o,t,r.startContainer,r.startOffset);h!==-1&&(a.emptyBlocksIndex=h)}}return a},importSelection:function(t,o,a,d){if(!(!t||!o)){var r=a.createRange();r.setStart(o,0),r.collapse(!0);var s=o,l=[],u=0,h=!1,f=!1,g=0,v=!1,b,y=!1,x=null;for((d||t.startsWithImage||typeof t.emptyBlocksIndex<"u")&&(y=!0);!v&&s;){if(s.nodeType>3){s=l.pop();continue}if(s.nodeType===3&&!f)b=u+s.length,!h&&t.start>=u&&t.start<=b&&(y||t.start<b?(r.setStart(s,t.start-u),h=!0):x=s),h&&t.end>=u&&t.end<=b&&(t.trailingImageCount?f=!0:(r.setEnd(s,t.end-u),v=!0)),u=b;else{if(t.trailingImageCount&&f&&(s.nodeName.toLowerCase()==="img"&&g++,g===t.trailingImageCount)){for(var N=0;s.parentNode.childNodes[N]!==s;)N++;r.setEnd(s.parentNode,N+1),v=!0}if(!v&&s.nodeType===1)for(var U=s.childNodes.length-1;U>=0;)l.push(s.childNodes[U]),U-=1}v||(s=l.pop())}!h&&x&&(r.setStart(x,x.length),r.setEnd(x,x.length)),typeof t.emptyBlocksIndex<"u"&&(r=this.importSelectionMoveCursorPastBlocks(a,o,t.emptyBlocksIndex,r)),d&&(r=this.importSelectionMoveCursorPastAnchor(t,r)),this.selectRange(a,r)}},importSelectionMoveCursorPastAnchor:function(t,o){var a=function(u){return u.nodeName.toLowerCase()==="a"};if(t.start===t.end&&o.startContainer.nodeType===3&&o.startOffset===o.startContainer.nodeValue.length&&i.util.traverseUp(o.startContainer,a)){for(var d=o.startContainer,r=o.startContainer.parentNode;r!==null&&r.nodeName.toLowerCase()!=="a";)r.childNodes[r.childNodes.length-1]!==d?r=null:(d=r,r=r.parentNode);if(r!==null&&r.nodeName.toLowerCase()==="a"){for(var s=null,l=0;s===null&&l<r.parentNode.childNodes.length;l++)r.parentNode.childNodes[l]===r&&(s=l);o.setStart(r.parentNode,s+1),o.collapse(!0)}}return o},importSelectionMoveCursorPastBlocks:function(t,o,a,d){var r=t.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,n,!1),s=d.startContainer,l,u,h=0;for(a=a||1,s.nodeType===3&&i.util.isBlockContainer(s.previousSibling)?l=s.previousSibling:l=i.util.getClosestBlockContainer(s);r.nextNode();)if(!u)l===r.currentNode&&(u=r.currentNode);else if(u=r.currentNode,h++,h===a||u.textContent.length>0)break;return u||(u=l),d.setStart(i.util.getFirstSelectableLeafNode(u),0),d},getIndexRelativeToAdjacentEmptyBlocks:function(t,o,a,d){if(a.textContent.length>0&&d>0)return-1;var r=a;if(r.nodeType!==3&&(r=a.childNodes[d]),r){if(!i.util.isElementAtBeginningOfBlock(r))return-1;var s=i.util.findPreviousSibling(r);if(s){if(s.nodeValue)return-1}else return-1}for(var l=i.util.getClosestBlockContainer(a),u=t.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,n,!1),h=0;u.nextNode();){var f=u.currentNode.textContent==="";if((f||h>0)&&(h+=1),u.currentNode===l)return h;f||(h=0)}return h},doesRangeStartWithImages:function(t,o){if(t.startOffset!==0||t.startContainer.nodeType!==1)return!1;if(t.startContainer.nodeName.toLowerCase()==="img")return!0;var a=t.startContainer.querySelector("img");if(!a)return!1;for(var d=o.createTreeWalker(t.startContainer,NodeFilter.SHOW_ALL,null,!1);d.nextNode();){var r=d.currentNode;if(r===a)break;if(r.nodeValue)return!1}return!0},getTrailingImageCount:function(t,o,a,d){if(d===0||a.nodeType!==1||a.nodeName.toLowerCase()!=="img"&&!a.querySelector("img"))return 0;for(var r=a.childNodes[d-1];r.hasChildNodes();)r=r.lastChild;for(var s=t,l=[],u=0,h=!1,f=!1,g=!1,v,b=0;!g&&s;){if(s.nodeType>3){s=l.pop();continue}if(s.nodeType===3&&!f)b=0,v=u+s.length,!h&&o.start>=u&&o.start<=v&&(h=!0),h&&o.end>=u&&o.end<=v&&(f=!0),u=v;else if(s.nodeName.toLowerCase()==="img"&&b++,s===r)g=!0;else if(s.nodeType===1)for(var y=s.childNodes.length-1;y>=0;)l.push(s.childNodes[y]),y-=1;g||(s=l.pop())}return b},selectionContainsContent:function(t){var o=t.getSelection();if(!o||o.isCollapsed||!o.rangeCount)return!1;if(o.toString().trim()!=="")return!0;var a=this.getSelectedParentElement(o.getRangeAt(0));return!!(a&&(a.nodeName.toLowerCase()==="img"||a.nodeType===1&&a.querySelector("img")))},selectionInContentEditableFalse:function(t){var o,a=this.findMatchingSelectionParent(function(d){var r=d&&d.getAttribute("contenteditable");return r==="true"&&(o=!0),d.nodeName!=="#text"&&r==="false"},t);return!o&&a},getSelectionHtml:function(o){var a,d="",r=o.getSelection(),s,l;if(r.rangeCount){for(l=o.createElement("div"),a=0,s=r.rangeCount;a<s;a+=1)l.appendChild(r.getRangeAt(a).cloneContents());d=l.innerHTML}return d},getCaretOffsets:function(o,a){var d,r;return a||(a=window.getSelection().getRangeAt(0)),d=a.cloneRange(),r=a.cloneRange(),d.selectNodeContents(o),d.setEnd(a.endContainer,a.endOffset),r.selectNodeContents(o),r.setStart(a.endContainer,a.endOffset),{left:d.toString().length,right:r.toString().length}},rangeSelectsSingleNode:function(t){var o=t.startContainer;return o===t.endContainer&&o.hasChildNodes()&&t.endOffset===t.startOffset+1},getSelectedParentElement:function(t){return t?this.rangeSelectsSingleNode(t)&&t.startContainer.childNodes[t.startOffset].nodeType!==3?t.startContainer.childNodes[t.startOffset]:t.startContainer.nodeType===3?t.startContainer.parentNode:t.startContainer:null},getSelectedElements:function(t){var o=t.getSelection(),a,d,r;if(!o.rangeCount||o.isCollapsed||!o.getRangeAt(0).commonAncestorContainer)return[];if(a=o.getRangeAt(0),a.commonAncestorContainer.nodeType===3){for(d=[],r=a.commonAncestorContainer;r.parentNode&&r.parentNode.childNodes.length===1;)d.push(r.parentNode),r=r.parentNode;return d}return[].filter.call(a.commonAncestorContainer.getElementsByTagName("*"),function(s){return typeof o.containsNode=="function"?o.containsNode(s,!0):!0})},selectNode:function(t,o){var a=o.createRange();a.selectNodeContents(t),this.selectRange(o,a)},select:function(t,o,a,d,r){var s=t.createRange();return s.setStart(o,a),d?s.setEnd(d,r):s.collapse(!0),this.selectRange(t,s),s},clearSelection:function(t,o){o?t.getSelection().collapseToStart():t.getSelection().collapseToEnd()},moveCursor:function(t,o,a){this.select(t,o,a)},getSelectionRange:function(t){var o=t.getSelection();return o.rangeCount===0?null:o.getRangeAt(0)},selectRange:function(t,o){var a=t.getSelection();a.removeAllRanges(),a.addRange(o)},getSelectionStart:function(t){var o=t.getSelection().anchorNode,a=o&&o.nodeType===3?o.parentNode:o;return a}};i.selection=e}(),function(){"use strict";function n(t,o){return t?t.some(function(a){if(typeof a.getInteractionElements!="function")return!1;var d=a.getInteractionElements();return d?(Array.isArray(d)||(d=[d]),d.some(function(r){return i.util.isDescendant(r,o,!0)})):!1}):!1}var e=function(t){this.base=t,this.options=this.base.options,this.events=[],this.disabledEvents={},this.customEvents={},this.listeners={}};e.prototype={InputEventOnContenteditableSupported:!i.util.isIE&&!i.util.isEdge,attachDOMEvent:function(t,o,a,d){var r=this.base.options.contentWindow,s=this.base.options.ownerDocument;t=i.util.isElement(t)||[r,s].indexOf(t)>-1?[t]:t,Array.prototype.forEach.call(t,(function(l){l.addEventListener(o,a,d),this.events.push([l,o,a,d])}).bind(this))},detachDOMEvent:function(t,o,a,d){var r,s,l=this.base.options.contentWindow,u=this.base.options.ownerDocument;t&&(t=i.util.isElement(t)||[l,u].indexOf(t)>-1?[t]:t,Array.prototype.forEach.call(t,(function(h){r=this.indexOfListener(h,o,a,d),r!==-1&&(s=this.events.splice(r,1)[0],s[0].removeEventListener(s[1],s[2],s[3]))}).bind(this)))},indexOfListener:function(t,o,a,d){var r,s,l;for(r=0,s=this.events.length;r<s;r=r+1)if(l=this.events[r],l[0]===t&&l[1]===o&&l[2]===a&&l[3]===d)return r;return-1},detachAllDOMEvents:function(){for(var t=this.events.pop();t;)t[0].removeEventListener(t[1],t[2],t[3]),t=this.events.pop()},detachAllEventsFromElement:function(t){for(var o=this.events.filter(function(s){return s&&s[0].getAttribute&&s[0].getAttribute("medium-editor-index")===t.getAttribute("medium-editor-index")}),a=0,d=o.length;a<d;a++){var r=o[a];this.detachDOMEvent(r[0],r[1],r[2],r[3])}},attachAllEventsToElement:function(t){this.listeners.editableInput&&(this.contentCache[t.getAttribute("medium-editor-index")]=t.innerHTML),this.eventsCache&&this.eventsCache.forEach(function(o){this.attachDOMEvent(t,o.name,o.handler.bind(this))},this)},enableCustomEvent:function(t){this.disabledEvents[t]!==void 0&&delete this.disabledEvents[t]},disableCustomEvent:function(t){this.disabledEvents[t]=!0},attachCustomEvent:function(t,o){this.setupListener(t),this.customEvents[t]||(this.customEvents[t]=[]),this.customEvents[t].push(o)},detachCustomEvent:function(t,o){var a=this.indexOfCustomListener(t,o);a!==-1&&this.customEvents[t].splice(a,1)},indexOfCustomListener:function(t,o){return!this.customEvents[t]||!this.customEvents[t].length?-1:this.customEvents[t].indexOf(o)},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(t,o,a){this.customEvents[t]&&!this.disabledEvents[t]&&this.customEvents[t].forEach(function(d){d(o,a)})},destroy:function(){this.detachAllDOMEvents(),this.detachAllCustomEvents(),this.detachExecCommand(),this.base.elements&&this.base.elements.forEach(function(t){t.removeAttribute("data-medium-focused")})},attachToExecCommand:function(){this.execCommandListener||(this.execCommandListener=(function(t){this.handleDocumentExecCommand(t)}).bind(this),this.wrapExecCommand(),this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener))},detachExecCommand:function(){var t=this.options.ownerDocument;if(!(!this.execCommandListener||!t.execCommand.listeners)){var o=t.execCommand.listeners.indexOf(this.execCommandListener);o!==-1&&t.execCommand.listeners.splice(o,1),t.execCommand.listeners.length||this.unwrapExecCommand()}},wrapExecCommand:function(){var t=this.options.ownerDocument;if(!t.execCommand.listeners){var o=function(d,r){t.execCommand.listeners&&t.execCommand.listeners.forEach(function(s){s({command:d[0],value:d[2],args:d,result:r})})},a=function(){var d=t.execCommand.orig.apply(this,arguments);if(!t.execCommand.listeners)return d;var r=Array.prototype.slice.call(arguments);return o(r,d),d};a.orig=t.execCommand,a.listeners=[],a.callListeners=o,t.execCommand=a}},unwrapExecCommand:function(){var t=this.options.ownerDocument;t.execCommand.orig&&(t.execCommand=t.execCommand.orig)},setupListener:function(t){if(!this.listeners[t]){switch(t){case"externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),!0);break;case"blur":this.setupListener("externalInteraction");break;case"focus":this.setupListener("externalInteraction");break;case"editableInput":this.contentCache={},this.base.elements.forEach(function(o){this.contentCache[o.getAttribute("medium-editor-index")]=o.innerHTML},this),this.InputEventOnContenteditableSupported&&this.attachToEachElement("input",this.handleInput),this.InputEventOnContenteditableSupported||(this.setupListener("editableKeypress"),this.keypressUpdateInput=!0,this.attachDOMEvent(document,"selectionchange",this.handleDocumentSelectionChange.bind(this)),this.attachToExecCommand());break;case"editableClick":this.attachToEachElement("click",this.handleClick);break;case"editableBlur":this.attachToEachElement("blur",this.handleBlur);break;case"editableKeypress":this.attachToEachElement("keypress",this.handleKeypress);break;case"editableKeyup":this.attachToEachElement("keyup",this.handleKeyup);break;case"editableKeydown":this.attachToEachElement("keydown",this.handleKeydown);break;case"editableKeydownSpace":this.setupListener("editableKeydown");break;case"editableKeydownEnter":this.setupListener("editableKeydown");break;case"editableKeydownTab":this.setupListener("editableKeydown");break;case"editableKeydownDelete":this.setupListener("editableKeydown");break;case"editableMouseover":this.attachToEachElement("mouseover",this.handleMouseover);break;case"editableDrag":this.attachToEachElement("dragover",this.handleDragging),this.attachToEachElement("dragleave",this.handleDragging);break;case"editableDrop":this.attachToEachElement("drop",this.handleDrop);break;case"editablePaste":this.attachToEachElement("paste",this.handlePaste);break}this.listeners[t]=!0}},attachToEachElement:function(t,o){this.eventsCache||(this.eventsCache=[]),this.base.elements.forEach(function(a){this.attachDOMEvent(a,t,o.bind(this))},this),this.eventsCache.push({name:t,handler:o})},cleanupElement:function(t){var o=t.getAttribute("medium-editor-index");o&&(this.detachAllEventsFromElement(t),this.contentCache&&delete this.contentCache[o])},focusElement:function(t){t.focus(),this.updateFocus(t,{target:t,type:"focus"})},updateFocus:function(t,o){var a=this.base.getFocusedElement(),d;a&&o.type==="click"&&this.lastMousedownTarget&&(i.util.isDescendant(a,this.lastMousedownTarget,!0)||n(this.base.extensions,this.lastMousedownTarget))&&(d=a),d||this.base.elements.some(function(s){return!d&&i.util.isDescendant(s,t,!0)&&(d=s),!!d},this);var r=!i.util.isDescendant(a,t,!0)&&!n(this.base.extensions,t);d!==a&&(a&&r&&(a.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",o,a)),d&&(d.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",o,d))),r&&this.triggerCustomEvent("externalInteraction",o)},updateInput:function(t,o){if(this.contentCache){var a=t.getAttribute("medium-editor-index"),d=t.innerHTML;d!==this.contentCache[a]&&this.triggerCustomEvent("editableInput",o,t),this.contentCache[a]=d}},handleDocumentSelectionChange:function(t){if(t.currentTarget&&t.currentTarget.activeElement){var o=t.currentTarget.activeElement,a;this.base.elements.some(function(d){return i.util.isDescendant(d,o,!0)?(a=d,!0):!1},this),a&&this.updateInput(a,{target:o,currentTarget:a})}},handleDocumentExecCommand:function(){var t=this.base.getFocusedElement();t&&this.updateInput(t,{target:t,currentTarget:t})},handleBodyClick:function(t){this.updateFocus(t.target,t)},handleBodyFocus:function(t){this.updateFocus(t.target,t)},handleBodyMousedown:function(t){this.lastMousedownTarget=t.target},handleInput:function(t){this.updateInput(t.currentTarget,t)},handleClick:function(t){this.triggerCustomEvent("editableClick",t,t.currentTarget)},handleBlur:function(t){this.triggerCustomEvent("editableBlur",t,t.currentTarget)},handleKeypress:function(t){if(this.triggerCustomEvent("editableKeypress",t,t.currentTarget),this.keypressUpdateInput){var o={target:t.target,currentTarget:t.currentTarget};setTimeout((function(){this.updateInput(o.currentTarget,o)}).bind(this),0)}},handleKeyup:function(t){this.triggerCustomEvent("editableKeyup",t,t.currentTarget)},handleMouseover:function(t){this.triggerCustomEvent("editableMouseover",t,t.currentTarget)},handleDragging:function(t){this.triggerCustomEvent("editableDrag",t,t.currentTarget)},handleDrop:function(t){this.triggerCustomEvent("editableDrop",t,t.currentTarget)},handlePaste:function(t){this.triggerCustomEvent("editablePaste",t,t.currentTarget)},handleKeydown:function(t){if(this.triggerCustomEvent("editableKeydown",t,t.currentTarget),i.util.isKey(t,i.util.keyCode.SPACE))return this.triggerCustomEvent("editableKeydownSpace",t,t.currentTarget);if(i.util.isKey(t,i.util.keyCode.ENTER)||t.ctrlKey&&i.util.isKey(t,i.util.keyCode.M))return this.triggerCustomEvent("editableKeydownEnter",t,t.currentTarget);if(i.util.isKey(t,i.util.keyCode.TAB))return this.triggerCustomEvent("editableKeydownTab",t,t.currentTarget);if(i.util.isKey(t,[i.util.keyCode.DELETE,i.util.keyCode.BACKSPACE]))return this.triggerCustomEvent("editableKeydownDelete",t,t.currentTarget)}},i.Events=e}(),function(){"use strict";var n=i.Extension.extend({action:void 0,aria:void 0,tagNames:void 0,style:void 0,useQueryState:void 0,contentDefault:void 0,contentFA:void 0,classList:void 0,attrs:void 0,constructor:function(e){n.isBuiltInButton(e)?i.Extension.call(this,this.defaults[e]):i.Extension.call(this,e)},init:function(){i.Extension.prototype.init.apply(this,arguments),this.button=this.createButton(),this.on(this.button,"click",this.handleClick.bind(this))},getButton:function(){return this.button},getAction:function(){return typeof this.action=="function"?this.action(this.base.options):this.action},getAria:function(){return typeof this.aria=="function"?this.aria(this.base.options):this.aria},getTagNames:function(){return typeof this.tagNames=="function"?this.tagNames(this.base.options):this.tagNames},createButton:function(){var e=this.document.createElement("button"),t=this.contentDefault,o=this.getAria(),a=this.getEditorOption("buttonLabels");return e.classList.add("medium-editor-action"),e.classList.add("medium-editor-action-"+this.name),this.classList&&this.classList.forEach(function(d){e.classList.add(d)}),e.setAttribute("data-action",this.getAction()),o&&(e.setAttribute("title",o),e.setAttribute("aria-label",o)),this.attrs&&Object.keys(this.attrs).forEach(function(d){e.setAttribute(d,this.attrs[d])},this),a==="fontawesome"&&this.contentFA&&(t=this.contentFA),e.innerHTML=t,e},handleClick:function(e){e.preventDefault(),e.stopPropagation();var t=this.getAction();t&&this.execAction(t)},isActive:function(){return this.button.classList.contains(this.getEditorOption("activeButtonClass"))},setInactive:function(){this.button.classList.remove(this.getEditorOption("activeButtonClass")),delete this.knownState},setActive:function(){this.button.classList.add(this.getEditorOption("activeButtonClass")),delete this.knownState},queryCommandState:function(){var e=null;return this.useQueryState&&(e=this.base.queryCommandState(this.getAction())),e},isAlreadyApplied:function(e){var t=!1,o=this.getTagNames(),a,d;return this.knownState===!1||this.knownState===!0?this.knownState:(o&&o.length>0&&(t=o.indexOf(e.nodeName.toLowerCase())!==-1),!t&&this.style&&(a=this.style.value.split("|"),d=this.window.getComputedStyle(e,null).getPropertyValue(this.style.prop),a.forEach(function(r){this.knownState||(t=d.indexOf(r)!==-1,(t||this.style.prop!=="text-decoration")&&(this.knownState=t))},this)),t)}});n.isBuiltInButton=function(e){return typeof e=="string"&&i.extensions.button.prototype.defaults.hasOwnProperty(e)},i.extensions.button=n}(),function(){"use strict";i.extensions.button.prototype.defaults={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:"<b>B</b>",contentFA:'<i class="fa fa-bold"></i>'},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:"<b><i>I</i></b>",contentFA:'<i class="fa fa-italic"></i>'},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:!0,contentDefault:"<b><u>U</u></b>",contentFA:'<i class="fa fa-underline"></i>'},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"<s>A</s>",contentFA:'<i class="fa fa-strikethrough"></i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1</sup></b>",contentFA:'<i class="fa fa-superscript"></i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1</sub></b>",contentFA:'<i class="fa fa-subscript"></i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image</b>",contentFA:'<i class="fa fa-picture-o"></i>'},html:{name:"html",action:"html",aria:"evaluate html",tagNames:["iframe","object"],contentDefault:"<b>html</b>",contentFA:'<i class="fa fa-code"></i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:"<b>1.</b>",contentFA:'<i class="fa fa-list-ol"></i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:"<b>&bull;</b>",contentFA:'<i class="fa fa-list-ul"></i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;</b>",contentFA:'<i class="fa fa-indent"></i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;</b>",contentFA:'<i class="fa fa-outdent"></i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:"<b>C</b>",contentFA:'<i class="fa fa-align-center"></i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"<b>J</b>",contentFA:'<i class="fa fa-align-justify"></i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"<b>L</b>",contentFA:'<i class="fa fa-align-left"></i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"<b>R</b>",contentFA:'<i class="fa fa-align-right"></i>'},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X</b>",contentFA:'<i class="fa fa-eraser"></i>'},quote:{name:"quote",action:"append-blockquote",aria:"blockquote",tagNames:["blockquote"],contentDefault:"<b>&ldquo;</b>",contentFA:'<i class="fa fa-quote-right"></i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101</b>",contentFA:'<i class="fa fa-code fa-lg"></i>'},h1:{name:"h1",action:"append-h1",aria:"header type one",tagNames:["h1"],contentDefault:"<b>H1</b>",contentFA:'<i class="fa fa-header"><sup>1</sup>'},h2:{name:"h2",action:"append-h2",aria:"header type two",tagNames:["h2"],contentDefault:"<b>H2</b>",contentFA:'<i class="fa fa-header"><sup>2</sup>'},h3:{name:"h3",action:"append-h3",aria:"header type three",tagNames:["h3"],contentDefault:"<b>H3</b>",contentFA:'<i class="fa fa-header"><sup>3</sup>'},h4:{name:"h4",action:"append-h4",aria:"header type four",tagNames:["h4"],contentDefault:"<b>H4</b>",contentFA:'<i class="fa fa-header"><sup>4</sup>'},h5:{name:"h5",action:"append-h5",aria:"header type five",tagNames:["h5"],contentDefault:"<b>H5</b>",contentFA:'<i class="fa fa-header"><sup>5</sup>'},h6:{name:"h6",action:"append-h6",aria:"header type six",tagNames:["h6"],contentDefault:"<b>H6</b>",contentFA:'<i class="fa fa-header"><sup>6</sup>'}}}(),function(){"use strict";var n=i.extensions.button.extend({init:function(){i.extensions.button.prototype.init.apply(this,arguments)},formSaveLabel:"&#10003;",formCloseLabel:"&times;",activeClass:"medium-editor-toolbar-form-active",hasForm:!0,getForm:function(){},isDisplayed:function(){return this.hasForm?this.getForm().classList.contains(this.activeClass):!1},showForm:function(){this.hasForm&&this.getForm().classList.add(this.activeClass)},hideForm:function(){this.hasForm&&this.getForm().classList.remove(this.activeClass)},showToolbarDefaultActions:function(){var e=this.base.getExtensionByName("toolbar");e&&e.showToolbarDefaultActions()},hideToolbarDefaultActions:function(){var e=this.base.getExtensionByName("toolbar");e&&e.hideToolbarDefaultActions()},setToolbarPosition:function(){var e=this.base.getExtensionByName("toolbar");e&&e.setToolbarPosition()}});i.extensions.form=n}(),function(){"use strict";var n=i.extensions.form.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:!1,placeholderText:"Paste or type a link",targetCheckbox:!1,targetCheckboxText:"Open in new window",name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>',init:function(){i.extensions.form.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this))},handleClick:function(e){e.preventDefault(),e.stopPropagation();var t=i.selection.getSelectionRange(this.document);return t.startContainer.nodeName.toLowerCase()==="a"||t.endContainer.nodeName.toLowerCase()==="a"||i.util.getClosestTag(i.selection.getSelectedParentElement(t),"a")?this.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},handleKeydown:function(e){i.util.isKey(e,i.util.keyCode.K)&&i.util.isMetaCtrlKey(e)&&!e.shiftKey&&this.handleClick(e)},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var e=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.placeholderText,'">'];return e.push('<a href="#" class="medium-editor-toolbar-save">',this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>"),e.push('<a href="#" class="medium-editor-toolbar-close">',this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>"),this.targetCheckbox&&e.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-target" id="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">','<label for="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">',this.targetCheckboxText,"</label>","</div>"),this.customClassOption&&e.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>",this.customClassOptionText,"</label>","</div>"),e.join("")},isDisplayed:function(){return i.extensions.form.prototype.isDisplayed.apply(this)},hideForm:function(){i.extensions.form.prototype.hideForm.apply(this),this.getInput().value=""},showForm:function(e){var t=this.getInput(),o=this.getAnchorTargetCheckbox(),a=this.getAnchorButtonCheckbox();if(e=e||{value:""},typeof e=="string"&&(e={value:e}),this.base.saveSelection(),this.hideToolbarDefaultActions(),i.extensions.form.prototype.showForm.apply(this),this.setToolbarPosition(),t.value=e.value,t.focus(),o&&(o.checked=e.target==="_blank"),a){var d=e.buttonClass?e.buttonClass.split(" "):[];a.checked=d.indexOf(this.customClassOption)!==-1}},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},getFormOpts:function(){var e=this.getAnchorTargetCheckbox(),t=this.getAnchorButtonCheckbox(),o={value:this.getInput().value.trim()};return this.linkValidation&&(o.value=this.checkLinkFormat(o.value)),o.target="_self",e&&e.checked&&(o.target="_blank"),t&&t.checked&&(o.buttonClass=this.customClassOption),o},doFormSave:function(){var e=this.getFormOpts();this.completeFormSave(e)},completeFormSave:function(e){this.base.restoreSelection(),this.execAction(this.action,e),this.base.checkSelection()},ensureEncodedUri:function(e){return e===decodeURI(e)?encodeURI(e):e},ensureEncodedUriComponent:function(e){return e===decodeURIComponent(e)?encodeURIComponent(e):e},ensureEncodedParam:function(e){var t=e.split("="),o=t[0],a=t[1];return o+(a===void 0?"":"="+this.ensureEncodedUriComponent(a))},ensureEncodedQuery:function(e){return e.split("&").map(this.ensureEncodedParam.bind(this)).join("&")},checkLinkFormat:function(e){var t=/^([a-z]+:)?\/\/|^(mailto|tel|maps):|^\#/i,o=t.test(e),a="",d=/^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/,r=e.match(/^(.*?)(?:\?(.*?))?(?:#(.*))?$/),s=r[1],l=r[2],u=r[3];if(d.test(e))return"tel:"+e;if(!o){var h=s.split("/")[0];(h.match(/.+(\.|:).+/)||h==="localhost")&&(a="http://")}return a+this.ensureEncodedUri(s)+(l===void 0?"":"?"+this.ensureEncodedQuery(l))+(u===void 0?"":"#"+u)},doFormCancel:function(){this.base.restoreSelection(),this.base.checkSelection()},attachFormEvents:function(e){var t=e.querySelector(".medium-editor-toolbar-close"),o=e.querySelector(".medium-editor-toolbar-save"),a=e.querySelector(".medium-editor-toolbar-input");this.on(e,"click",this.handleFormClick.bind(this)),this.on(a,"keyup",this.handleTextboxKeyup.bind(this)),this.on(t,"click",this.handleCloseClick.bind(this)),this.on(o,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var e=this.document,t=e.createElement("div");return t.className="medium-editor-toolbar-form",t.id="medium-editor-toolbar-form-anchor-"+this.getEditorId(),t.innerHTML=this.getTemplate(),this.attachFormEvents(t),t},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},getAnchorTargetCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-target")},getAnchorButtonCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-button")},handleTextboxKeyup:function(e){if(e.keyCode===i.util.keyCode.ENTER){e.preventDefault(),this.doFormSave();return}e.keyCode===i.util.keyCode.ESCAPE&&(e.preventDefault(),this.doFormCancel())},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}});i.extensions.anchor=n}(),function(){"use strict";var n=i.Extension.extend({name:"anchor-preview",hideDelay:500,previewValueSelector:"a",showWhenToolbarIsVisible:!1,showOnEmptyLinks:!0,init:function(){this.anchorPreview=this.createPreview(),this.getEditorOption("elementsContainer").appendChild(this.anchorPreview),this.attachToEditables()},getInteractionElements:function(){return this.getPreviewElement()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var e=this.document.createElement("div");return e.id="medium-editor-anchor-preview-"+this.getEditorId(),e.className="medium-editor-anchor-preview",e.innerHTML=this.getTemplate(),this.on(e,"click",this.handleClick.bind(this)),e},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>'},destroy:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview&&this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"),this.activeAnchor=null},showPreview:function(e){return this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||e.getAttribute("data-disable-preview")?!0:(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=e.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=e.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=e,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(e){e=e||this.activeAnchor;var t=this.window.innerWidth,o=this.anchorPreview.offsetHeight,a=e.getBoundingClientRect(),d=this.diffLeft,r=this.diffTop,s=this.getEditorOption("elementsContainer"),l=["absolute","fixed"].indexOf(window.getComputedStyle(s).getPropertyValue("position"))>-1,u={},h,f,g,v,b;h=this.anchorPreview.offsetWidth/2;var y=this.base.getExtensionByName("toolbar");y&&(d=y.diffLeft,r=y.diffTop),f=d-h,l?(v=s.getBoundingClientRect(),["top","left"].forEach(function(x){u[x]=a[x]-v[x]}),u.width=a.width,u.height=a.height,a=u,t=v.width,b=s.scrollTop):b=this.window.pageYOffset,g=a.left+a.width/2,b+=o+a.top+a.height-r-this.anchorPreview.offsetHeight,this.anchorPreview.style.top=Math.round(b)+"px",this.anchorPreview.style.right="initial",g<h?(this.anchorPreview.style.left=f+h+"px",this.anchorPreview.style.right="initial"):t-g<h?(this.anchorPreview.style.left="auto",this.anchorPreview.style.right=0):(this.anchorPreview.style.left=f+g+"px",this.anchorPreview.style.right="initial")},attachToEditables:function(){this.subscribe("editableMouseover",this.handleEditableMouseover.bind(this)),this.subscribe("positionedToolbar",this.handlePositionedToolbar.bind(this))},handlePositionedToolbar:function(){this.showWhenToolbarIsVisible||this.hidePreview()},handleClick:function(e){var t=this.base.getExtensionByName("anchor"),o=this.activeAnchor;t&&o&&(e.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay((function(){if(o){var a={value:o.attributes.href.value,target:o.getAttribute("target"),buttonClass:o.getAttribute("class")};t.showForm(a),o=null}}).bind(this))),this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null,this.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout),this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(e){var t=i.util.getClosestTag(e.target,"a");if(t!==!1){if(!this.showOnEmptyLinks&&(!/href=["']\S+["']/.test(t.outerHTML)||/href=["']#\S+["']/.test(t.outerHTML)))return!0;var o=this.base.getExtensionByName("toolbar");if(!this.showWhenToolbarIsVisible&&o&&o.isDisplayed&&o.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==t&&this.detachPreviewHandlers(),this.anchorToPreview=t,this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this),this.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout),this.base.delay((function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}).bind(this))}},handlePreviewMouseover:function(){this.lastOver=new Date().getTime(),this.hovering=!0},handlePreviewMouseout:function(e){(!e.relatedTarget||!/anchor-preview/.test(e.relatedTarget.className))&&(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;var e=new Date().getTime()-this.lastOver;e>this.hideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer),this.instanceHandlePreviewMouseover&&(this.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout))),this.hidePreview(),this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=new Date().getTime(),this.hovering=!0,this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this),this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this),this.intervalTimer=setInterval(this.updatePreview.bind(this),200),this.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}});i.extensions.anchorPreview=n}(),function(){"use strict";var n,e,t,o,a;n=[" ","	",`
`,"\r","\xA0","\u2000","\u2001","\u2002","\u2003","\u2028","\u2029"],e="com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw",t="(((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.]("+e+")\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?\xAB\xBB\u201C\u201D\u2018\u2019])))|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.("+e+"))",o=new RegExp("^("+e+")$","i"),a=new RegExp(t,"gi");function d(s){return!i.util.getClosestTag(s,"a")}var r=i.Extension.extend({init:function(){i.Extension.prototype.init.apply(this,arguments),this.disableEventHandling=!1,this.subscribe("editableKeypress",this.onKeypress.bind(this)),this.subscribe("editableBlur",this.onBlur.bind(this)),this.document.execCommand("AutoUrlDetect",!1,!1)},isLastInstance:function(){for(var s=0,l=0;l<this.window._mediumEditors.length;l++){var u=this.window._mediumEditors[l];u!==null&&u.getExtensionByName("autoLink")!==void 0&&s++}return s===1},destroy:function(){this.document.queryCommandSupported("AutoUrlDetect")&&this.isLastInstance()&&this.document.execCommand("AutoUrlDetect",!1,!0)},onBlur:function(s,l){this.performLinking(l)},onKeypress:function(s){this.disableEventHandling||i.util.isKey(s,[i.util.keyCode.SPACE,i.util.keyCode.ENTER])&&(clearTimeout(this.performLinkingTimeout),this.performLinkingTimeout=setTimeout((function(){try{var l=this.base.exportSelection();this.performLinking(s.target)&&this.base.importSelection(l,!0)}catch(u){window.console&&window.console.error("Failed to perform linking",u),this.disableEventHandling=!0}}).bind(this),0))},performLinking:function(s){var l=i.util.splitByBlockElements(s),u=!1;l.length===0&&(l=[s]);for(var h=0;h<l.length;h++)u=this.removeObsoleteAutoLinkSpans(l[h])||u,u=this.performLinkingWithinElement(l[h])||u;return this.base.events.updateInput(s,{target:s,currentTarget:s}),u},removeObsoleteAutoLinkSpans:function(s){if(!s||s.nodeType===3)return!1;for(var l=s.querySelectorAll('span[data-auto-link="true"]'),u=!1,h=0;h<l.length;h++){var f=l[h].textContent;if(f.indexOf("://")===-1&&(f=i.util.ensureUrlHasProtocol(f)),l[h].getAttribute("data-href")!==f&&d(l[h])){u=!0;var g=f.replace(/\s+$/,"");if(l[h].getAttribute("data-href")===g){var v=f.length-g.length,b=i.util.splitOffDOMTree(l[h],this.splitTextBeforeEnd(l[h],v));l[h].parentNode.insertBefore(b,l[h].nextSibling)}else i.util.unwrap(l[h],this.document)}}return u},splitTextBeforeEnd:function(s,l){for(var u=this.document.createTreeWalker(s,NodeFilter.SHOW_TEXT,null,!1),h=!0;h;)h=u.lastChild()!==null;for(var f,g,v;l>0&&v!==null;)f=u.currentNode,g=f.nodeValue,g.length>l?(v=f.splitText(g.length-l),l=0):(v=u.previousNode(),l-=g.length);return v},performLinkingWithinElement:function(s){for(var l=this.findLinkableText(s),u=!1,h=0;h<l.length;h++){var f=i.util.findOrCreateMatchingTextNodes(this.document,s,l[h]);this.shouldNotLink(f)||this.createAutoLink(f,l[h].href)}return u},shouldNotLink:function(s){for(var l=!1,u=0;u<s.length&&l===!1;u++)l=!!i.util.traverseUp(s[u],function(h){return h.nodeName.toLowerCase()==="a"||h.getAttribute&&h.getAttribute("data-auto-link")==="true"});return l},findLinkableText:function(s){for(var l=s.textContent,u=null,h=[];(u=a.exec(l))!==null;){var f=!0,g=u.index+u[0].length;f=(u.index===0||n.indexOf(l[u.index-1])!==-1)&&(g===l.length||n.indexOf(l[g])!==-1),f=f&&(u[0].indexOf("/")!==-1||o.test(u[0].split(".").pop().split("?").shift())),f&&h.push({href:u[0],start:u.index,end:g})}return h},createAutoLink:function(s,l){l=i.util.ensureUrlHasProtocol(l);var u=i.util.createLink(this.document,s,l,this.getEditorOption("targetBlank")?"_blank":null),h=this.document.createElement("span");for(h.setAttribute("data-auto-link","true"),h.setAttribute("data-href",l),u.insertBefore(h,u.firstChild);u.childNodes.length>1;)h.appendChild(u.childNodes[1])}});i.extensions.autoLink=r}(),function(){"use strict";var n="medium-editor-dragover";function e(o){var a=i.util.getContainerEditorElement(o),d=Array.prototype.slice.call(a.parentElement.querySelectorAll("."+n));d.forEach(function(r){r.classList.remove(n)})}var t=i.Extension.extend({name:"fileDragging",allowedTypes:["image"],init:function(){i.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(o){o.preventDefault(),o.dataTransfer.dropEffect="copy";var a=o.target.classList?o.target:o.target.parentElement;e(a),o.type==="dragover"&&a.classList.add(n)},handleDrop:function(o){o.preventDefault(),o.stopPropagation(),this.base.selectElement(o.target);var a=this.base.exportSelection();a.start=a.end,this.base.importSelection(a),o.dataTransfer.files&&Array.prototype.slice.call(o.dataTransfer.files).forEach(function(d){this.isAllowedFile(d)&&d.type.match("image")&&this.insertImageFile(d)},this),e(o.target)},isAllowedFile:function(o){return this.allowedTypes.some(function(a){return!!o.type.match(a)})},insertImageFile:function(o){if(typeof FileReader=="function"){var a=new FileReader;a.readAsDataURL(o),a.addEventListener("load",(function(d){var r=this.document.createElement("img");r.src=d.target.result,i.util.insertHTMLCommand(this.document,r.outerHTML)}).bind(this))}}});i.extensions.fileDragging=t}(),function(){"use strict";var n=i.Extension.extend({name:"keyboard-commands",commands:[{command:"bold",key:"B",meta:!0,shift:!1,alt:!1},{command:"italic",key:"I",meta:!0,shift:!1,alt:!1},{command:"underline",key:"U",meta:!0,shift:!1,alt:!1}],init:function(){i.Extension.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.keys={},this.commands.forEach(function(e){var t=e.key.charCodeAt(0);this.keys[t]||(this.keys[t]=[]),this.keys[t].push(e)},this)},handleKeydown:function(e){var t=i.util.getKeyCode(e);if(this.keys[t]){var o=i.util.isMetaCtrlKey(e),a=!!e.shiftKey,d=!!e.altKey;this.keys[t].forEach(function(r){r.meta===o&&r.shift===a&&(r.alt===d||r.alt===void 0)&&(e.preventDefault(),e.stopPropagation(),typeof r.command=="function"?r.command.apply(this):r.command!==!1&&this.execAction(r.command))},this)}}});i.extensions.keyboardCommands=n}(),function(){"use strict";var n=i.extensions.form.extend({name:"fontname",action:"fontName",aria:"change font name",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-font"></i>',fonts:["","Arial","Verdana","Times New Roman"],init:function(){i.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(e){if(e.preventDefault(),e.stopPropagation(),!this.isDisplayed()){var t=this.document.queryCommandValue("fontName")+"";this.showForm(t)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return this.getForm().style.display==="block"},hideForm:function(){this.getForm().style.display="none",this.getSelect().value=""},showForm:function(e){var t=this.getSelect();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),t.value=e||"",t.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontName(),this.base.checkSelection()},createForm:function(){var e=this.document,t=e.createElement("div"),o=e.createElement("select"),a=e.createElement("a"),d=e.createElement("a"),r;t.className="medium-editor-toolbar-form",t.id="medium-editor-toolbar-form-fontname-"+this.getEditorId(),this.on(t,"click",this.handleFormClick.bind(this));for(var s=0;s<this.fonts.length;s++)r=e.createElement("option"),r.innerHTML=this.fonts[s],r.value=this.fonts[s],o.appendChild(r);return o.className="medium-editor-toolbar-select",t.appendChild(o),this.on(o,"change",this.handleFontChange.bind(this)),d.setAttribute("href","#"),d.className="medium-editor-toobar-save",d.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"></i>':"&#10003;",t.appendChild(d),this.on(d,"click",this.handleSaveClick.bind(this),!0),a.setAttribute("href","#"),a.className="medium-editor-toobar-close",a.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"></i>':"&times;",t.appendChild(a),this.on(a,"click",this.handleCloseClick.bind(this)),t},getSelect:function(){return this.getForm().querySelector("select.medium-editor-toolbar-select")},clearFontName:function(){i.selection.getSelectedElements(this.document).forEach(function(e){e.nodeName.toLowerCase()==="font"&&e.hasAttribute("face")&&e.removeAttribute("face")})},handleFontChange:function(){var e=this.getSelect().value;e===""?this.clearFontName():this.execAction("fontName",{value:e})},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}});i.extensions.fontName=n}(),function(){"use strict";var n=i.extensions.form.extend({name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>',init:function(){i.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(e){if(e.preventDefault(),e.stopPropagation(),!this.isDisplayed()){var t=this.document.queryCommandValue("fontSize")+"";this.showForm(t)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return this.getForm().style.display==="block"},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(e){var t=this.getInput();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),t.value=e||"",t.focus()},destroy:function(){if(!this.form)return!1;this.form.parentNode&&this.form.parentNode.removeChild(this.form),delete this.form},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontSize(),this.base.checkSelection()},createForm:function(){var e=this.document,t=e.createElement("div"),o=e.createElement("input"),a=e.createElement("a"),d=e.createElement("a");return t.className="medium-editor-toolbar-form",t.id="medium-editor-toolbar-form-fontsize-"+this.getEditorId(),this.on(t,"click",this.handleFormClick.bind(this)),o.setAttribute("type","range"),o.setAttribute("min","1"),o.setAttribute("max","7"),o.className="medium-editor-toolbar-input",t.appendChild(o),this.on(o,"change",this.handleSliderChange.bind(this)),d.setAttribute("href","#"),d.className="medium-editor-toobar-save",d.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"></i>':"&#10003;",t.appendChild(d),this.on(d,"click",this.handleSaveClick.bind(this),!0),a.setAttribute("href","#"),a.className="medium-editor-toobar-close",a.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"></i>':"&times;",t.appendChild(a),this.on(a,"click",this.handleCloseClick.bind(this)),t},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){i.selection.getSelectedElements(this.document).forEach(function(e){e.nodeName.toLowerCase()==="font"&&e.hasAttribute("size")&&e.removeAttribute("size")})},handleSliderChange:function(){var e=this.getInput().value;e==="4"?this.clearFontSize():this.execAction("fontSize",{value:e})},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}});i.extensions.fontSize=n}(),function(){"use strict";var n="%ME_PASTEBIN%",e=null,t=null,o=function(s){s.stopPropagation()};function a(){return[[new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g),""],[new RegExp(/<!--StartFragment-->|<!--EndFragment-->/g),""],[new RegExp(/<br>$/i),""],[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:(bold|700)|font-weight:(bold|700);font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:(bold|700)[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"||)(((?!&quot;|&rdquo;|&ldquo;|"||).)*)(?:&quot;|&rdquo;|&ldquo;|"||)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""],[new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]\>/gi),"$1"]]}function d(s,l,u){var h=s.clipboardData||l.clipboardData||u.dataTransfer,f={};if(!h)return f;if(h.getData){var g=h.getData("Text");g&&g.length>0&&(f["text/plain"]=g)}if(h.types)for(var v=0;v<h.types.length;v++){var b=h.types[v];f[b]=h.getData(b)}return f}var r=i.Extension.extend({forcePlainText:!0,cleanPastedHTML:!1,preCleanReplacements:[],cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],unwrapTags:[],init:function(){i.Extension.prototype.init.apply(this,arguments),(this.forcePlainText||this.cleanPastedHTML)&&(this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.getEditorElements().forEach(function(s){this.on(s,"paste",this.handlePaste.bind(this))},this),this.subscribe("addElement",this.handleAddElement.bind(this)))},handleAddElement:function(s,l){this.on(l,"paste",this.handlePaste.bind(this))},destroy:function(){(this.forcePlainText||this.cleanPastedHTML)&&this.removePasteBin()},handlePaste:function(s,l){if(!s.defaultPrevented){var u=d(s,this.window,this.document),h=u["text/html"],f=u["text/plain"];this.window.clipboardData&&s.clipboardData===void 0&&!h&&(h=f),(h||f)&&(s.preventDefault(),this.doPaste(h,f,l))}},doPaste:function(s,l,u){var h,f="",g;if(this.cleanPastedHTML&&s)return this.cleanPaste(s);if(l){if(this.getEditorOption("disableReturn")||u&&u.getAttribute("data-disable-return"))f=i.util.htmlEntities(l);else if(h=l.split(/[\r\n]+/g),h.length>1)for(g=0;g<h.length;g+=1)h[g]!==""&&(f+="<p>"+i.util.htmlEntities(h[g])+"</p>");else f=i.util.htmlEntities(h[0]);i.util.insertHTMLCommand(this.document,f)}},handlePasteBinPaste:function(s){if(s.defaultPrevented){this.removePasteBin();return}var l=d(s,this.window,this.document),u=l["text/html"],h=l["text/plain"],f=t;if(!this.cleanPastedHTML||u){s.preventDefault(),this.removePasteBin(),this.doPaste(u,h,f),this.trigger("editablePaste",{currentTarget:f,target:f},f);return}setTimeout((function(){this.cleanPastedHTML&&(u=this.getPasteBinHtml()),this.removePasteBin(),this.doPaste(u,h,f),this.trigger("editablePaste",{currentTarget:f,target:f},f)}).bind(this),0)},handleKeydown:function(s,l){i.util.isKey(s,i.util.keyCode.V)&&i.util.isMetaCtrlKey(s)&&(s.stopImmediatePropagation(),this.removePasteBin(),this.createPasteBin(l))},createPasteBin:function(s){var l,u=i.selection.getSelectionRange(this.document),h=this.window.pageYOffset;t=s,u&&(l=u.getClientRects(),l.length?h+=l[0].top:u.startContainer.getBoundingClientRect!==void 0?h+=u.startContainer.getBoundingClientRect().top:h+=u.getBoundingClientRect().top),e=u;var f=this.document.createElement("div");f.id=this.pasteBinId="medium-editor-pastebin-"+ +Date.now(),f.setAttribute("style","border: 1px red solid; position: absolute; top: "+h+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"),f.setAttribute("contentEditable",!0),f.innerHTML=n,this.document.body.appendChild(f),this.on(f,"focus",o),this.on(f,"focusin",o),this.on(f,"focusout",o),f.focus(),i.selection.selectNode(f,this.document),this.boundHandlePaste||(this.boundHandlePaste=this.handlePasteBinPaste.bind(this)),this.on(f,"paste",this.boundHandlePaste)},removePasteBin:function(){e!==null&&(i.selection.selectRange(this.document,e),e=null),t!==null&&(t=null);var s=this.getPasteBin();s&&s&&(this.off(s,"focus",o),this.off(s,"focusin",o),this.off(s,"focusout",o),this.off(s,"paste",this.boundHandlePaste),s.parentElement.removeChild(s))},getPasteBin:function(){return this.document.getElementById(this.pasteBinId)},getPasteBinHtml:function(){var s=this.getPasteBin();if(!s||s.firstChild&&s.firstChild.id==="mcepastebin")return!1;var l=s.innerHTML;return!l||l===n?!1:l},cleanPaste:function(s){var l,u,h,f,g=/<p|<br|<div/.test(s),v=[].concat(this.preCleanReplacements||[],a(),this.cleanReplacements||[]);for(l=0;l<v.length;l+=1)s=s.replace(v[l][0],v[l][1]);if(!g)return this.pasteHTML(s);for(h=this.document.createElement("div"),h.innerHTML="<p>"+s.split("<br><br>").join("</p><p>")+"</p>",u=h.querySelectorAll("a,p,div,br"),l=0;l<u.length;l+=1)switch(f=u[l],f.innerHTML=f.innerHTML.replace(/\n/gi," "),f.nodeName.toLowerCase()){case"p":case"div":this.filterCommonBlocks(f);break;case"br":this.filterLineBreak(f);break}this.pasteHTML(h.innerHTML)},pasteHTML:function(s,l){l=i.util.defaults({},l,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags,unwrapTags:this.unwrapTags});var u,h,f,g,v=this.document.createDocumentFragment();for(v.appendChild(this.document.createElement("body")),g=v.querySelector("body"),g.innerHTML=s,this.cleanupSpans(g),u=g.querySelectorAll("*"),f=0;f<u.length;f+=1)h=u[f],h.nodeName.toLowerCase()==="a"&&this.getEditorOption("targetBlank")&&i.util.setTargetBlank(h),i.util.cleanupAttrs(h,l.cleanAttrs),i.util.cleanupTags(h,l.cleanTags),i.util.unwrapTags(h,l.unwrapTags);i.util.insertHTMLCommand(this.document,g.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(s){return s&&(s.nodeName.toLowerCase()==="p"||s.nodeName.toLowerCase()==="div")},filterCommonBlocks:function(s){/^\s*$/.test(s.textContent)&&s.parentNode&&s.parentNode.removeChild(s)},filterLineBreak:function(s){this.isCommonBlock(s.previousElementSibling)?this.removeWithParent(s):this.isCommonBlock(s.parentNode)&&(s.parentNode.firstChild===s||s.parentNode.lastChild===s)?this.removeWithParent(s):s.parentNode&&s.parentNode.childElementCount===1&&s.parentNode.textContent===""&&this.removeWithParent(s)},removeWithParent:function(s){s&&s.parentNode&&(s.parentNode.parentNode&&s.parentNode.childElementCount===1?s.parentNode.parentNode.removeChild(s.parentNode):s.parentNode.removeChild(s))},cleanupSpans:function(s){var l,u,h,f=s.querySelectorAll(".replace-with"),g=function(v){return v&&v.nodeName!=="#text"&&v.getAttribute("contenteditable")==="false"};for(l=0;l<f.length;l+=1)u=f[l],h=this.document.createElement(u.classList.contains("bold")?"b":"i"),u.classList.contains("bold")&&u.classList.contains("italic")?h.innerHTML="<i>"+u.innerHTML+"</i>":h.innerHTML=u.innerHTML,u.parentNode.replaceChild(h,u);for(f=s.querySelectorAll("span"),l=0;l<f.length;l+=1){if(u=f[l],i.util.traverseUp(u,g))return!1;i.util.unwrap(u,this.document)}}});i.extensions.paste=r}(),function(){"use strict";var n=i.Extension.extend({name:"placeholder",text:"Type your text",hideOnClick:!0,init:function(){i.Extension.prototype.init.apply(this,arguments),this.initPlaceholders(),this.attachEventHandlers()},initPlaceholders:function(){this.getEditorElements().forEach(this.initElement,this)},handleAddElement:function(e,t){this.initElement(t)},initElement:function(e){e.getAttribute("data-placeholder")||e.setAttribute("data-placeholder",this.text),this.updatePlaceholder(e)},destroy:function(){this.getEditorElements().forEach(this.cleanupElement,this)},handleRemoveElement:function(e,t){this.cleanupElement(t)},cleanupElement:function(e){e.getAttribute("data-placeholder")===this.text&&e.removeAttribute("data-placeholder")},showPlaceholder:function(e){e&&(i.util.isFF&&e.childNodes.length===0?(e.classList.add("medium-editor-placeholder-relative"),e.classList.remove("medium-editor-placeholder")):(e.classList.add("medium-editor-placeholder"),e.classList.remove("medium-editor-placeholder-relative")))},hidePlaceholder:function(e){e&&(e.classList.remove("medium-editor-placeholder"),e.classList.remove("medium-editor-placeholder-relative"))},updatePlaceholder:function(e,t){if(e.querySelector("img, blockquote, ul, ol, table")||e.textContent.replace(/^\s+|\s+$/g,"")!=="")return this.hidePlaceholder(e);t||this.showPlaceholder(e)},attachEventHandlers:function(){this.hideOnClick&&this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableInput",this.handleInput.bind(this)),this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("addElement",this.handleAddElement.bind(this)),this.subscribe("removeElement",this.handleRemoveElement.bind(this))},handleInput:function(e,t){var o=this.hideOnClick&&t===this.base.getFocusedElement();this.updatePlaceholder(t,o)},handleFocus:function(e,t){this.hidePlaceholder(t)},handleBlur:function(e,t){this.updatePlaceholder(t)}});i.extensions.placeholder=n}(),function(){"use strict";var n=i.Extension.extend({name:"toolbar",align:"center",allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","h2","h3","quote"],diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",standardizeSelectionStart:!1,static:!1,sticky:!1,stickyTopOffset:0,updateOnEmptySelection:!1,relativeContainer:null,init:function(){i.Extension.prototype.init.apply(this,arguments),this.initThrottledMethods(),this.relativeContainer?this.relativeContainer.appendChild(this.getToolbarElement()):this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement())},forEachExtension:function(e,t){return this.base.extensions.forEach(function(o){if(o!==this)return e.apply(t||this,arguments)},this)},createToolbar:function(){var e=this.document.createElement("div");return e.id="medium-editor-toolbar-"+this.getEditorId(),e.className="medium-editor-toolbar",this.static?e.className+=" static-toolbar":this.relativeContainer?e.className+=" medium-editor-relative-toolbar":e.className+=" medium-editor-stalker-toolbar",e.appendChild(this.createToolbarButtons()),this.forEachExtension(function(t){t.hasForm&&e.appendChild(t.getForm())}),this.attachEventHandlers(),e},createToolbarButtons:function(){var e=this.document.createElement("ul"),t,o,a,d,r,s;return e.id="medium-editor-toolbar-actions"+this.getEditorId(),e.className="medium-editor-toolbar-actions",e.style.display="block",this.buttons.forEach(function(l){typeof l=="string"?(r=l,s=null):(r=l.name,s=l),d=this.base.addBuiltInExtension(r,s),d&&typeof d.getButton=="function"&&(o=d.getButton(this.base),t=this.document.createElement("li"),i.util.isElement(o)?t.appendChild(o):t.innerHTML=o,e.appendChild(t))},this),a=e.querySelectorAll("button"),a.length>0&&(a[0].classList.add(this.firstButtonClass),a[a.length-1].classList.add(this.lastButtonClass)),e},destroy:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},getInteractionElements:function(){return this.getToolbarElement()},getToolbarElement:function(){return this.toolbar||(this.toolbar=this.createToolbar()),this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=i.util.throttle((function(){this.base.isActive&&this.positionToolbarIfShown()}).bind(this))},attachEventHandlers:function(){this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableClick",this.handleEditableClick.bind(this)),this.subscribe("editableKeyup",this.handleEditableKeyup.bind(this)),this.on(this.document.documentElement,"mouseup",this.handleDocumentMouseup.bind(this)),this.static&&this.sticky&&this.on(this.window,"scroll",this.handleWindowScroll.bind(this),!0),this.on(this.window,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(e){if(e&&e.target&&i.util.isDescendant(this.getToolbarElement(),e.target))return!1;this.checkState()},handleEditableClick:function(){setTimeout((function(){this.checkState()}).bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout),clearTimeout(this.delayShowTimeout),this.hideTimeout=setTimeout((function(){this.hideToolbar()}).bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout),this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),this.trigger("showToolbar",{},this.base.getFocusedElement()))},hideToolbar:function(){this.isDisplayed()&&(this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),this.trigger("hideToolbar",{},this.base.getFocusedElement()))},isToolbarDefaultActionsDisplayed:function(){return this.getToolbarActionsElement().style.display==="block"},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms(),this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block"),this.delayShowTimeout=this.base.delay((function(){this.showToolbar()}).bind(this))},hideExtensionForms:function(){this.forEachExtension(function(e){e.hasForm&&e.isDisplayed()&&e.hideForm()})},multipleBlockElementsSelected:function(){var e=/<[^\/>][^>]*><\/[^>]+>/gim,t=new RegExp("<("+i.util.blockContainerElementNames.join("|")+")[^>]*>","g"),o=i.selection.getSelectionHtml(this.document).replace(e,""),a=o.match(t);return!!a&&a.length>1},modifySelection:function(){var e=this.window.getSelection(),t=e.getRangeAt(0);if(this.standardizeSelectionStart&&t.startContainer.nodeValue&&t.startOffset===t.startContainer.nodeValue.length){var o=i.util.findAdjacentTextNodeWithContent(i.selection.getSelectionElement(this.window),t.startContainer,this.document);if(o){for(var a=0;o.nodeValue.substr(a,1).trim().length===0;)a=a+1;t=i.selection.select(this.document,o,a,t.endContainer,t.endOffset)}}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.base.getFocusedElement()||i.selection.selectionInContentEditableFalse(this.window))return this.hideToolbar();var e=i.selection.getSelectionElement(this.window);if(!e||this.getEditorElements().indexOf(e)===-1||e.getAttribute("data-disable-toolbar"))return this.hideToolbar();if(this.updateOnEmptySelection&&this.static)return this.showAndUpdateToolbar();if(!i.selection.selectionContainsContent(this.document)||this.allowMultiParagraphSelection===!1&&this.multipleBlockElementsSelected())return this.hideToolbar();this.showAndUpdateToolbar()}},showAndUpdateToolbar:function(){this.modifySelection(),this.setToolbarButtonStates(),this.trigger("positionToolbar",{},this.base.getFocusedElement()),this.showToolbarDefaultActions(),this.setToolbarPosition()},setToolbarButtonStates:function(){this.forEachExtension(function(e){typeof e.isActive=="function"&&typeof e.setInactive=="function"&&e.setInactive()}),this.checkActiveButtons()},checkActiveButtons:function(){var e=[],t=null,o=i.selection.getSelectionRange(this.document),a,d=function(r){typeof r.checkState=="function"?r.checkState(a):typeof r.isActive=="function"&&typeof r.isAlreadyApplied=="function"&&typeof r.setActive=="function"&&!r.isActive()&&r.isAlreadyApplied(a)&&r.setActive()};if(o&&(this.forEachExtension(function(r){if(typeof r.queryCommandState=="function"&&(t=r.queryCommandState(),t!==null)){t&&typeof r.setActive=="function"&&r.setActive();return}e.push(r)}),a=i.selection.getSelectedParentElement(o),!!this.getEditorElements().some(function(r){return i.util.isDescendant(r,a,!0)})))for(;a&&(e.forEach(d),!i.util.isMediumEditorElement(a));)a=a.parentNode},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var e=this.base.getFocusedElement(),t=this.window.getSelection();if(!e)return this;(this.static||!t.isCollapsed)&&(this.showToolbar(),this.relativeContainer||(this.static?this.positionStaticToolbar(e):this.positionToolbar(t)),this.trigger("positionedToolbar",{},this.base.getFocusedElement()))},positionStaticToolbar:function(e){this.getToolbarElement().style.left="0";var t=this.document.documentElement&&this.document.documentElement.scrollTop||this.document.body.scrollTop,o=this.window.innerWidth,a=this.getToolbarElement(),d=e.getBoundingClientRect(),r=d.top+t,s=d.left+d.width/2,l=a.offsetHeight,u=a.offsetWidth,h=u/2,f;switch(this.sticky?t>r+e.offsetHeight-l-this.stickyTopOffset?(a.style.top=r+e.offsetHeight-l+"px",a.classList.remove("medium-editor-sticky-toolbar")):t>r-l-this.stickyTopOffset?(a.classList.add("medium-editor-sticky-toolbar"),a.style.top=this.stickyTopOffset+"px"):(a.classList.remove("medium-editor-sticky-toolbar"),a.style.top=r-l+"px"):a.style.top=r-l+"px",this.align){case"left":f=d.left;break;case"right":f=d.right-u;break;case"center":f=s-h;break}f<0?f=0:f+u>o&&(f=o-Math.ceil(u)-1),a.style.left=f+"px"},positionToolbar:function(e){this.getToolbarElement().style.left="0",this.getToolbarElement().style.right="initial";var t=e.getRangeAt(0),o=t.getBoundingClientRect();(!o||o.height===0&&o.width===0&&t.startContainer===t.endContainer)&&(t.startContainer.nodeType===1&&t.startContainer.querySelector("img")?o=t.startContainer.querySelector("img").getBoundingClientRect():o=t.startContainer.getBoundingClientRect());var a=this.window.innerWidth,d=this.getToolbarElement(),r=d.offsetHeight,s=d.offsetWidth,l=s/2,u=50,h=this.diffLeft-l,f=this.getEditorOption("elementsContainer"),g=["absolute","fixed"].indexOf(window.getComputedStyle(f).getPropertyValue("position"))>-1,v={},b={},y,x;g?(x=f.getBoundingClientRect(),["top","left"].forEach(function(N){b[N]=o[N]-x[N]}),b.width=o.width,b.height=o.height,o=b,a=x.width,v.top=f.scrollTop):v.top=this.window.pageYOffset,y=o.left+o.width/2,v.top+=o.top-r,o.top<u?(d.classList.add("medium-toolbar-arrow-over"),d.classList.remove("medium-toolbar-arrow-under"),v.top+=u+o.height-this.diffTop):(d.classList.add("medium-toolbar-arrow-under"),d.classList.remove("medium-toolbar-arrow-over"),v.top+=this.diffTop),y<l?(v.left=h+l,v.right="initial"):a-y<l?(v.left="auto",v.right=0):(v.left=h+y,v.right="initial"),["top","left","right"].forEach(function(N){d.style[N]=v[N]+(isNaN(v[N])?"":"px")})}});i.extensions.toolbar=n}(),function(){"use strict";var n=i.Extension.extend({init:function(){i.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(e){var t="medium-editor-dragover";e.preventDefault(),e.dataTransfer.dropEffect="copy",e.type==="dragover"?e.target.classList.add(t):e.type==="dragleave"&&e.target.classList.remove(t)},handleDrop:function(e){var t="medium-editor-dragover",o;e.preventDefault(),e.stopPropagation(),e.dataTransfer.files&&(o=Array.prototype.slice.call(e.dataTransfer.files,0),o.some((function(a){if(a.type.match("image")){var d,r;d=new FileReader,d.readAsDataURL(a),r="medium-img-"+ +new Date,i.util.insertHTMLCommand(this.document,'<img class="medium-editor-image-loading" id="'+r+'" />'),d.onload=(function(){var s=this.document.getElementById(r);s&&(s.removeAttribute("id"),s.removeAttribute("class"),s.src=d.result)}).bind(this)}}).bind(this))),e.target.classList.remove(t)}});i.extensions.imageDragging=n}(),function(){"use strict";function n(c){var p=i.selection.getSelectionStart(this.options.ownerDocument),m=p.textContent,_=i.selection.getCaretOffsets(p);(m[_.left-1]===void 0||m[_.left-1].trim()===""||m[_.left]!==void 0&&m[_.left].trim()==="")&&c.preventDefault()}function e(c,p){if(this.options.disableReturn||p.getAttribute("data-disable-return"))c.preventDefault();else if(this.options.disableDoubleReturn||p.getAttribute("data-disable-double-return")){var m=i.selection.getSelectionStart(this.options.ownerDocument);(m&&m.textContent.trim()===""&&m.nodeName.toLowerCase()!=="li"||m.previousElementSibling&&m.previousElementSibling.nodeName.toLowerCase()!=="br"&&m.previousElementSibling.textContent.trim()==="")&&c.preventDefault()}}function t(c){var p=i.selection.getSelectionStart(this.options.ownerDocument),m=p&&p.nodeName.toLowerCase();m==="pre"&&(c.preventDefault(),i.util.insertHTMLCommand(this.options.ownerDocument,"    ")),i.util.isListItem(p)&&(c.preventDefault(),c.shiftKey?this.options.ownerDocument.execCommand("outdent",!1,null):this.options.ownerDocument.execCommand("indent",!1,null))}function o(c){var p,m=i.selection.getSelectionStart(this.options.ownerDocument),_=m.nodeName.toLowerCase(),w=/^(\s+|<br\/?>)?$/i,S=/h\d/i;i.util.isKey(c,[i.util.keyCode.BACKSPACE,i.util.keyCode.ENTER])&&m.previousElementSibling&&S.test(_)&&i.selection.getCaretOffsets(m).left===0?i.util.isKey(c,i.util.keyCode.BACKSPACE)&&w.test(m.previousElementSibling.innerHTML)?(m.previousElementSibling.parentNode.removeChild(m.previousElementSibling),c.preventDefault()):!this.options.disableDoubleReturn&&i.util.isKey(c,i.util.keyCode.ENTER)&&(p=this.options.ownerDocument.createElement("p"),p.innerHTML="<br>",m.previousElementSibling.parentNode.insertBefore(p,m),c.preventDefault()):i.util.isKey(c,i.util.keyCode.DELETE)&&m.nextElementSibling&&m.previousElementSibling&&!S.test(_)&&w.test(m.innerHTML)&&S.test(m.nextElementSibling.nodeName.toLowerCase())?(i.selection.moveCursor(this.options.ownerDocument,m.nextElementSibling),m.previousElementSibling.parentNode.removeChild(m),c.preventDefault()):i.util.isKey(c,i.util.keyCode.BACKSPACE)&&_==="li"&&w.test(m.innerHTML)&&!m.previousElementSibling&&!m.parentElement.previousElementSibling&&m.nextElementSibling&&m.nextElementSibling.nodeName.toLowerCase()==="li"?(p=this.options.ownerDocument.createElement("p"),p.innerHTML="<br>",m.parentElement.parentElement.insertBefore(p,m.parentElement),i.selection.moveCursor(this.options.ownerDocument,p),m.parentElement.removeChild(m),c.preventDefault()):i.util.isKey(c,i.util.keyCode.BACKSPACE)&&i.util.getClosestTag(m,"blockquote")!==!1&&i.selection.getCaretOffsets(m).left===0?(c.preventDefault(),i.util.execFormatBlock(this.options.ownerDocument,"p")):i.util.isKey(c,i.util.keyCode.ENTER)&&i.util.getClosestTag(m,"blockquote")!==!1&&i.selection.getCaretOffsets(m).right===0?(p=this.options.ownerDocument.createElement("p"),p.innerHTML="<br>",m.parentElement.insertBefore(p,m.nextSibling),i.selection.moveCursor(this.options.ownerDocument,p),c.preventDefault()):i.util.isKey(c,i.util.keyCode.BACKSPACE)&&i.util.isMediumEditorElement(m.parentElement)&&!m.previousElementSibling&&m.nextElementSibling&&w.test(m.innerHTML)&&(c.preventDefault(),i.selection.moveCursor(this.options.ownerDocument,m.nextSibling),m.parentElement.removeChild(m))}function a(c){var p=i.selection.getSelectionStart(this.options.ownerDocument),m;p&&(i.util.isMediumEditorElement(p)&&p.children.length===0&&!i.util.isBlockContainer(p)&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),i.util.isKey(c,i.util.keyCode.ENTER)&&!i.util.isListItem(p)&&!i.util.isBlockContainer(p)&&(m=p.nodeName.toLowerCase(),m==="a"?this.options.ownerDocument.execCommand("unlink",!1,null):!c.shiftKey&&!c.ctrlKey&&this.options.ownerDocument.execCommand("formatBlock",!1,"p")))}function d(c,p){var m=p.parentNode.querySelector('textarea[medium-editor-textarea-id="'+p.getAttribute("medium-editor-textarea-id")+'"]');m&&(m.value=p.innerHTML.trim())}function r(c){c._mediumEditors||(c._mediumEditors=[null]),this.id||(this.id=c._mediumEditors.length),c._mediumEditors[this.id]=this}function s(c){!c._mediumEditors||!c._mediumEditors[this.id]||(c._mediumEditors[this.id]=null)}function l(c,p,m){var _=[];if(c||(c=[]),typeof c=="string"&&(c=p.querySelectorAll(c)),i.util.isElement(c)&&(c=[c]),m)for(var w=0;w<c.length;w++){var S=c[w];i.util.isElement(S)&&!S.getAttribute("data-medium-editor-element")&&!S.getAttribute("medium-editor-textarea-id")&&_.push(S)}else _=Array.prototype.slice.apply(c);return _}function u(c){var p=c.parentNode.querySelector('textarea[medium-editor-textarea-id="'+c.getAttribute("medium-editor-textarea-id")+'"]');p&&(p.classList.remove("medium-editor-hidden"),p.removeAttribute("medium-editor-textarea-id")),c.parentNode&&c.parentNode.removeChild(c)}function h(c,p){return Object.keys(p).forEach(function(m){c[m]===void 0&&(c[m]=p[m])}),c}function f(c,p,m){var _={window:m.options.contentWindow,document:m.options.ownerDocument,base:m};return c=h(c,_),typeof c.init=="function"&&c.init(),c.name||(c.name=p),c}function g(){return this.elements.every(function(c){return!!c.getAttribute("data-disable-toolbar")})?!1:this.options.toolbar!==!1}function v(){return g.call(this)?this.options.anchorPreview!==!1:!1}function b(){return this.options.placeholder!==!1}function y(){return this.options.autoLink!==!1}function x(){return this.options.imageDragging!==!1}function N(){return this.options.keyboardCommands!==!1}function U(){return!this.options.extensions.imageDragging}function ne(c){for(var p=this.options.ownerDocument.createElement("div"),m=Date.now(),_="medium-editor-"+m,w=c.attributes;this.options.ownerDocument.getElementById(_);)m++,_="medium-editor-"+m;p.className=c.className,p.id=_,p.innerHTML=c.value,c.setAttribute("medium-editor-textarea-id",_);for(var S=0,le=w.length;S<le;S++)p.hasAttribute(w[S].nodeName)||p.setAttribute(w[S].nodeName,w[S].value);return c.form&&this.on(c.form,"reset",(function(Q){Q.defaultPrevented||this.resetContent(this.options.ownerDocument.getElementById(_))}).bind(this)),c.classList.add("medium-editor-hidden"),c.parentNode.insertBefore(p,c),p}function bt(c,p){if(!c.getAttribute("data-medium-editor-element")){c.nodeName.toLowerCase()==="textarea"&&(c=ne.call(this,c),this.instanceHandleEditableInput||(this.instanceHandleEditableInput=d.bind(this),this.subscribe("editableInput",this.instanceHandleEditableInput))),!this.options.disableEditing&&!c.getAttribute("data-disable-editing")&&(c.setAttribute("contentEditable",!0),c.setAttribute("spellcheck",this.options.spellcheck)),this.instanceHandleEditableKeydownEnter||(c.getAttribute("data-disable-return")||c.getAttribute("data-disable-double-return"))&&(this.instanceHandleEditableKeydownEnter=e.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter)),!this.options.disableReturn&&!c.getAttribute("data-disable-return")&&this.on(c,"keyup",a.bind(this));var m=i.util.guid();c.setAttribute("data-medium-editor-element",!0),c.classList.add("medium-editor-element"),c.setAttribute("role","textbox"),c.setAttribute("aria-multiline",!0),c.setAttribute("data-medium-editor-editor-index",p),c.setAttribute("medium-editor-index",m),Te[m]=c.innerHTML,this.events.attachAllEventsToElement(c)}return c}function C(){this.subscribe("editableKeydownTab",t.bind(this)),this.subscribe("editableKeydownDelete",o.bind(this)),this.subscribe("editableKeydownEnter",o.bind(this)),this.options.disableExtraSpaces&&this.subscribe("editableKeydownSpace",n.bind(this)),this.instanceHandleEditableKeydownEnter||(this.options.disableReturn||this.options.disableDoubleReturn)&&(this.instanceHandleEditableKeydownEnter=e.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter))}function O(){if(this.extensions=[],Object.keys(this.options.extensions).forEach(function(w){w!=="toolbar"&&this.options.extensions[w]&&this.extensions.push(f(this.options.extensions[w],w,this))},this),U.call(this)){var c=this.options.fileDragging;c||(c={},x.call(this)||(c.allowedTypes=[])),this.addBuiltInExtension("fileDragging",c)}var p={paste:!0,"anchor-preview":v.call(this),autoLink:y.call(this),keyboardCommands:N.call(this),placeholder:b.call(this)};Object.keys(p).forEach(function(w){p[w]&&this.addBuiltInExtension(w)},this);var m=this.options.extensions.toolbar;if(!m&&g.call(this)){var _=i.util.extend({},this.options.toolbar,{allowMultiParagraphSelection:this.options.allowMultiParagraphSelection});m=new i.extensions.toolbar(_)}m&&this.extensions.push(f(m,"toolbar",this))}function B(c,p){var m=[["allowMultiParagraphSelection","toolbar.allowMultiParagraphSelection"]];return p&&m.forEach(function(_){p.hasOwnProperty(_[0])&&p[_[0]]!==void 0&&i.util.deprecated(_[0],_[1],"v6.0.0")}),i.util.defaults({},p,c)}function Z(c,p){var m=/^append-(.+)$/gi,_=/justify([A-Za-z]*)$/g,w,S;if(w=m.exec(c),w)return i.util.execFormatBlock(this.options.ownerDocument,w[1]);if(c==="fontSize")return p.size&&i.util.deprecated(".size option for fontSize command",".value","6.0.0"),S=p.value||p.size,this.options.ownerDocument.execCommand("fontSize",!1,S);if(c==="fontName")return p.name&&i.util.deprecated(".name option for fontName command",".value","6.0.0"),S=p.value||p.name,this.options.ownerDocument.execCommand("fontName",!1,S);if(c==="createLink")return this.createLink(p);if(c==="image"){var le=this.options.contentWindow.getSelection().toString().trim();return this.options.ownerDocument.execCommand("insertImage",!1,le)}if(c==="html"){var Q=this.options.contentWindow.getSelection().toString().trim();return i.util.insertHTMLCommand(this.options.ownerDocument,Q)}if(_.exec(c)){var Pe=this.options.ownerDocument.execCommand(c,!1,null),Ne=i.selection.getSelectedParentElement(i.selection.getSelectionRange(this.options.ownerDocument));return Ne&&Me.call(this,i.util.getTopBlockContainer(Ne)),Pe}return S=p&&p.value,this.options.ownerDocument.execCommand(c,!1,S)}function Me(c){if(c){var p,m=Array.prototype.slice.call(c.childNodes).filter(function(_){var w=_.nodeName.toLowerCase()==="div";return w&&!p&&(p=_.style.textAlign),w});m.length&&(this.saveSelection(),m.forEach(function(_){if(_.style.textAlign===p){var w=_.lastChild;if(w){i.util.unwrap(_,this.options.ownerDocument);var S=this.options.ownerDocument.createElement("BR");w.parentNode.insertBefore(S,w.nextSibling)}}},this),c.style.textAlign=p,this.restoreSelection())}}var Te={};i.prototype={init:function(c,p){return this.options=B.call(this,this.defaults,p),this.origElements=c,this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body),this.setup()},setup:function(){this.isActive||(r.call(this,this.options.contentWindow),this.events=new i.Events(this),this.elements=[],this.addElements(this.origElements),this.elements.length!==0&&(this.isActive=!0,O.call(this),C.call(this)))},destroy:function(){this.isActive&&(this.isActive=!1,this.extensions.forEach(function(c){typeof c.destroy=="function"&&c.destroy()},this),this.events.destroy(),this.elements.forEach(function(c){this.options.spellcheck&&(c.innerHTML=c.innerHTML),c.removeAttribute("contentEditable"),c.removeAttribute("spellcheck"),c.removeAttribute("data-medium-editor-element"),c.classList.remove("medium-editor-element"),c.removeAttribute("role"),c.removeAttribute("aria-multiline"),c.removeAttribute("medium-editor-index"),c.removeAttribute("data-medium-editor-editor-index"),c.getAttribute("medium-editor-textarea-id")&&u(c)},this),this.elements=[],this.instanceHandleEditableKeydownEnter=null,this.instanceHandleEditableInput=null,s.call(this,this.options.contentWindow))},on:function(c,p,m,_){return this.events.attachDOMEvent(c,p,m,_),this},off:function(c,p,m,_){return this.events.detachDOMEvent(c,p,m,_),this},subscribe:function(c,p){return this.events.attachCustomEvent(c,p),this},unsubscribe:function(c,p){return this.events.detachCustomEvent(c,p),this},trigger:function(c,p,m){return this.events.triggerCustomEvent(c,p,m),this},delay:function(c){var p=this;return setTimeout(function(){p.isActive&&c()},this.options.delay)},serialize:function(){var c,p,m={},_=this.elements.length;for(c=0;c<_;c+=1)p=this.elements[c].id!==""?this.elements[c].id:"element-"+c,m[p]={value:this.elements[c].innerHTML.trim()};return m},getExtensionByName:function(c){var p;return this.extensions&&this.extensions.length&&this.extensions.some(function(m){return m.name===c?(p=m,!0):!1}),p},addBuiltInExtension:function(c,p){var m=this.getExtensionByName(c),_;if(m)return m;switch(c){case"anchor":_=i.util.extend({},this.options.anchor,p),m=new i.extensions.anchor(_);break;case"anchor-preview":m=new i.extensions.anchorPreview(this.options.anchorPreview);break;case"autoLink":m=new i.extensions.autoLink;break;case"fileDragging":m=new i.extensions.fileDragging(p);break;case"fontname":m=new i.extensions.fontName(this.options.fontName);break;case"fontsize":m=new i.extensions.fontSize(p);break;case"keyboardCommands":m=new i.extensions.keyboardCommands(this.options.keyboardCommands);break;case"paste":m=new i.extensions.paste(this.options.paste);break;case"placeholder":m=new i.extensions.placeholder(this.options.placeholder);break;default:i.extensions.button.isBuiltInButton(c)&&(p?(_=i.util.defaults({},p,i.extensions.button.prototype.defaults[c]),m=new i.extensions.button(_)):m=new i.extensions.button(c))}return m&&this.extensions.push(f(m,c,this)),m},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){var c=this.getExtensionByName("toolbar");return c&&c.checkState(),this},queryCommandState:function(c){var p=/^full-(.+)$/gi,m,_=null;m=p.exec(c),m&&(c=m[1]);try{_=this.options.ownerDocument.queryCommandState(c)}catch{_=null}return _},execAction:function(c,p){var m=/^full-(.+)$/gi,_,w;return _=m.exec(c),_?(this.saveSelection(),this.selectAllContents(),w=Z.call(this,_[1],p),this.restoreSelection()):w=Z.call(this,c,p),(c==="insertunorderedlist"||c==="insertorderedlist")&&i.util.cleanListDOM(this.options.ownerDocument,this.getSelectedParentElement()),this.checkSelection(),w},getSelectedParentElement:function(c){return c===void 0&&(c=this.options.contentWindow.getSelection().getRangeAt(0)),i.selection.getSelectedParentElement(c)},selectAllContents:function(){var c=i.selection.getSelectionElement(this.options.contentWindow);if(c){for(;c.children.length===1;)c=c.children[0];this.selectElement(c)}},selectElement:function(c){i.selection.selectNode(c,this.options.ownerDocument);var p=i.selection.getSelectionElement(this.options.contentWindow);p&&this.events.focusElement(p)},getFocusedElement:function(){var c;return this.elements.some(function(p){return!c&&p.getAttribute("data-medium-focused")&&(c=p),!!c},this),c},exportSelection:function(){var c=i.selection.getSelectionElement(this.options.contentWindow),p=this.elements.indexOf(c),m=null;return p>=0&&(m=i.selection.exportSelection(c,this.options.ownerDocument)),m!==null&&p!==0&&(m.editableElementIndex=p),m},saveSelection:function(){this.selectionState=this.exportSelection()},importSelection:function(c,p){if(c){var m=this.elements[c.editableElementIndex||0];i.selection.importSelection(c,m,this.options.ownerDocument,p)}},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(c){var p=i.selection.getSelectionElement(this.options.contentWindow),m={},_;if(this.elements.indexOf(p)!==-1){try{if(this.events.disableCustomEvent("editableInput"),c.url&&i.util.deprecated(".url option for createLink",".value","6.0.0"),_=c.url||c.value,_&&_.trim().length>0){var w=this.options.contentWindow.getSelection();if(w){var S=w.getRangeAt(0),le=S.commonAncestorContainer,Q,Pe,Ne,Ye;if(S.endContainer.nodeType===3&&S.startContainer.nodeType!==3&&S.startOffset===0&&S.startContainer.firstChild===S.endContainer&&(le=S.endContainer),Pe=i.util.getClosestBlockContainer(S.startContainer),Ne=i.util.getClosestBlockContainer(S.endContainer),le.nodeType!==3&&le.textContent.length!==0&&Pe===Ne){var J=Pe||p,de=this.options.ownerDocument.createDocumentFragment();this.execAction("unlink"),Q=this.exportSelection(),de.appendChild(J.cloneNode(!0)),p===J?i.selection.select(this.options.ownerDocument,J.firstChild,0,J.lastChild,J.lastChild.nodeType===3?J.lastChild.nodeValue.length:J.lastChild.childNodes.length):i.selection.select(this.options.ownerDocument,J,0,J,J.childNodes.length);var jt=this.exportSelection();Ye=i.util.findOrCreateMatchingTextNodes(this.options.ownerDocument,de,{start:Q.start-jt.start,end:Q.end-jt.start,editableElementIndex:Q.editableElementIndex}),Ye.length===0&&(de=this.options.ownerDocument.createDocumentFragment(),de.appendChild(le.cloneNode(!0)),Ye=[de.firstChild.firstChild,de.firstChild.lastChild]),i.util.createLink(this.options.ownerDocument,Ye,_.trim());var zt=(de.firstChild.innerHTML.match(/^\s+/)||[""])[0].length;i.util.insertHTMLCommand(this.options.ownerDocument,de.firstChild.innerHTML.replace(/^\s+/,"")),Q.start-=zt,Q.end-=zt,this.importSelection(Q)}else this.options.ownerDocument.execCommand("createLink",!1,_);this.options.targetBlank||c.target==="_blank"?i.util.setTargetBlank(i.selection.getSelectionStart(this.options.ownerDocument),_):i.util.removeTargetBlank(i.selection.getSelectionStart(this.options.ownerDocument),_),c.buttonClass&&i.util.addClassToAnchors(i.selection.getSelectionStart(this.options.ownerDocument),c.buttonClass)}}if(this.options.targetBlank||c.target==="_blank"||c.buttonClass){m=this.options.ownerDocument.createEvent("HTMLEvents"),m.initEvent("input",!0,!0,this.options.contentWindow);for(var _t=0,on=this.elements.length;_t<on;_t+=1)this.elements[_t].dispatchEvent(m)}}finally{this.events.enableCustomEvent("editableInput")}this.events.triggerCustomEvent("editableInput",m,p)}},cleanPaste:function(c){this.getExtensionByName("paste").cleanPaste(c)},pasteHTML:function(c,p){this.getExtensionByName("paste").pasteHTML(c,p)},setContent:function(c,p){if(p=p||0,this.elements[p]){var m=this.elements[p];m.innerHTML=c,this.checkContentChanged(m)}},getContent:function(c){return c=c||0,this.elements[c]?this.elements[c].innerHTML.trim():null},checkContentChanged:function(c){c=c||i.selection.getSelectionElement(this.options.contentWindow),this.events.updateInput(c,{target:c,currentTarget:c})},resetContent:function(c){if(c){var p=this.elements.indexOf(c);p!==-1&&this.setContent(Te[c.getAttribute("medium-editor-index")],p);return}this.elements.forEach(function(m,_){this.setContent(Te[m.getAttribute("medium-editor-index")],_)},this)},addElements:function(c){var p=l(c,this.options.ownerDocument,!0);if(p.length===0)return!1;p.forEach(function(m){m=bt.call(this,m,this.id),this.elements.push(m),this.trigger("addElement",{target:m,currentTarget:m},m)},this)},removeElements:function(c){var p=l(c,this.options.ownerDocument),m=p.map(function(_){return _.getAttribute("medium-editor-textarea-id")&&_.parentNode?_.parentNode.querySelector('div[medium-editor-textarea-id="'+_.getAttribute("medium-editor-textarea-id")+'"]'):_});this.elements=this.elements.filter(function(_){return m.indexOf(_)!==-1?(this.events.cleanupElement(_),_.getAttribute("medium-editor-textarea-id")&&u(_),this.trigger("removeElement",{target:_,currentTarget:_},_),!1):!0},this)}},i.getEditorFromElement=function(c){var p=c.getAttribute("data-medium-editor-editor-index"),m=c&&c.ownerDocument&&(c.ownerDocument.defaultView||c.ownerDocument.parentWindow);return m&&m._mediumEditors&&m._mediumEditors[p]?m._mediumEditors[p]:null}}(),function(){i.prototype.defaults={activeButtonClass:"medium-editor-button-active",buttonLabels:!1,delay:0,disableReturn:!1,disableDoubleReturn:!1,disableExtraSpaces:!1,disableEditing:!1,autoLink:!1,elementsContainer:!1,contentWindow:window,ownerDocument:document,targetBlank:!1,extensions:{},spellcheck:!0}}(),i.parseVersionString=function(n){var e=n.split("-"),t=e[0].split("."),o=e.length>1?e[1]:"";return{major:parseInt(t[0],10),minor:parseInt(t[1],10),revision:parseInt(t[2],10),preRelease:o,toString:function(){return[t[0],t[1],t[2]].join(".")+(o?"-"+o:"")}}},i.version=i.parseVersionString.call(this,"5.23.3"),i}())});var xi=(()=>{let n=class n{constructor(t,o){this._renderer=t,this._elementRef=o,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(t,o){this._renderer.setProperty(this._elementRef.nativeElement,t,o)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}};n.\u0275fac=function(o){return new(o||n)(P(xt),P(re))},n.\u0275dir=z({type:n});let i=n;return i})(),an=(()=>{let n=class n extends xi{};n.\u0275fac=(()=>{let t;return function(a){return(t||(t=Qt(n)))(a||n)}})(),n.\u0275dir=z({type:n,features:[xe]});let i=n;return i})(),dt=new pe("");var ln={provide:dt,useExisting:Ie(()=>Ei),multi:!0};function dn(){let i=kt()?kt().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var cn=new pe(""),Ei=(()=>{let n=class n extends xi{constructor(t,o,a){super(t,o),this._compositionMode=a,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!dn())}writeValue(t){let o=t??"";this.setProperty("value",o)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}};n.\u0275fac=function(o){return new(o||n)(P(xt),P(re),P(cn,8))},n.\u0275dir=z({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(o,a){o&1&&T("input",function(r){return a._handleInput(r.target.value)})("blur",function(){return a.onTouched()})("compositionstart",function(){return a._compositionStart()})("compositionend",function(r){return a._compositionEnd(r.target.value)})},features:[ge([ln]),xe]});let i=n;return i})();var un=new pe(""),hn=new pe("");function wi(i){return i!=null}function Ai(i){return ri(i)?Wt(i):i}function Di(i){let n={};return i.forEach(e=>{n=e!=null?E(E({},n),e):n}),Object.keys(n).length===0?null:n}function Fi(i,n){return n.map(e=>e(i))}function fn(i){return!i.validate}function ki(i){return i.map(n=>fn(n)?n:e=>n.validate(e))}function mn(i){if(!i)return null;let n=i.filter(wi);return n.length==0?null:function(e){return Di(Fi(e,n))}}function Si(i){return i!=null?mn(ki(i)):null}function pn(i){if(!i)return null;let n=i.filter(wi);return n.length==0?null:function(e){let t=Fi(e,n).map(Ai);return Kt(t).pipe(Gt(Di))}}function Mi(i){return i!=null?pn(ki(i)):null}function mi(i,n){return i===null?[n]:Array.isArray(i)?[...i,n]:[i,n]}function gn(i){return i._rawValidators}function vn(i){return i._rawAsyncValidators}function It(i){return i?Array.isArray(i)?i:[i]:[]}function ot(i,n){return Array.isArray(i)?i.includes(n):i===n}function pi(i,n){let e=It(n);return It(i).forEach(o=>{ot(e,o)||e.push(o)}),e}function gi(i,n){return It(n).filter(e=>!ot(i,e))}var rt=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=Si(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=Mi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,e){return this.control?this.control.hasError(n,e):!1}getError(n,e){return this.control?this.control.getError(n,e):null}},st=class extends rt{get formDirective(){return null}get path(){return null}},Ke=class extends rt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},at=class{constructor(n){this._cd=n}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},bn={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Bo=L(E({},bn),{"[class.ng-submitted]":"isSubmitted"}),Ti=(()=>{let n=class n extends at{constructor(t){super(t)}};n.\u0275fac=function(o){return new(o||n)(P(Ke,2))},n.\u0275dir=z({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(o,a){o&2&&se("ng-untouched",a.isUntouched)("ng-touched",a.isTouched)("ng-pristine",a.isPristine)("ng-dirty",a.isDirty)("ng-valid",a.isValid)("ng-invalid",a.isInvalid)("ng-pending",a.isPending)},features:[xe]});let i=n;return i})(),Pi=(()=>{let n=class n extends at{constructor(t){super(t)}};n.\u0275fac=function(o){return new(o||n)(P(st,10))},n.\u0275dir=z({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(o,a){o&2&&se("ng-untouched",a.isUntouched)("ng-touched",a.isTouched)("ng-pristine",a.isPristine)("ng-dirty",a.isDirty)("ng-valid",a.isValid)("ng-invalid",a.isInvalid)("ng-pending",a.isPending)("ng-submitted",a.isSubmitted)},features:[xe]});let i=n;return i})();var Ue="VALID",nt="INVALID",De="PENDING",qe="DISABLED",ke=class{},lt=class extends ke{constructor(n,e){super(),this.value=n,this.source=e}},We=class extends ke{constructor(n,e){super(),this.pristine=n,this.source=e}},Ge=class extends ke{constructor(n,e){super(),this.touched=n,this.source=e}},Fe=class extends ke{constructor(n,e){super(),this.status=n,this.source=e}};function _n(i){return(ct(i)?i.validators:i)||null}function yn(i){return Array.isArray(i)?Si(i):i||null}function Cn(i,n){return(ct(n)?n.asyncValidators:i)||null}function xn(i){return Array.isArray(i)?Mi(i):i||null}function ct(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}var Vt=class{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=ee(()=>this.statusReactive()),this.statusReactive=Ce(void 0),this._pristine=ee(()=>this.pristineReactive()),this.pristineReactive=Ce(!0),this._touched=ee(()=>this.touchedReactive()),this.touchedReactive=Ce(!1),this._events=new qt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get status(){return te(this.statusReactive)}set status(n){te(()=>this.statusReactive.set(n))}get valid(){return this.status===Ue}get invalid(){return this.status===nt}get pending(){return this.status==De}get disabled(){return this.status===qe}get enabled(){return this.status!==qe}get pristine(){return te(this.pristineReactive)}set pristine(n){te(()=>this.pristineReactive.set(n))}get dirty(){return!this.pristine}get touched(){return te(this.touchedReactive)}set touched(n){te(()=>this.touchedReactive.set(n))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(pi(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(pi(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(gi(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(gi(n,this._rawAsyncValidators))}hasValidator(n){return ot(this._rawValidators,n)}hasAsyncValidator(n){return ot(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){let e=this.touched===!1;this.touched=!0;let t=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsTouched(L(E({},n),{sourceControl:t})),e&&n.emitEvent!==!1&&this._events.next(new Ge(!0,t))}markAllAsTouched(n={}){this.markAsTouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(n))}markAsUntouched(n={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let t=n.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:t})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,t),e&&n.emitEvent!==!1&&this._events.next(new Ge(!1,t))}markAsDirty(n={}){let e=this.pristine===!0;this.pristine=!1;let t=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsDirty(L(E({},n),{sourceControl:t})),e&&n.emitEvent!==!1&&this._events.next(new We(!1,t))}markAsPristine(n={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let t=n.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:n.emitEvent})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n,t),e&&n.emitEvent!==!1&&this._events.next(new We(!0,t))}markAsPending(n={}){this.status=De;let e=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new Fe(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.markAsPending(L(E({},n),{sourceControl:e}))}disable(n={}){let e=this._parentMarkedDirty(n.onlySelf);this.status=qe,this.errors=null,this._forEachChild(o=>{o.disable(L(E({},n),{onlySelf:!0}))}),this._updateValue();let t=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new lt(this.value,t)),this._events.next(new Fe(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(L(E({},n),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(n={}){let e=this._parentMarkedDirty(n.onlySelf);this.status=Ue,this._forEachChild(t=>{t.enable(L(E({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(L(E({},n),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(n,e){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let t=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ue||this.status===De)&&this._runAsyncValidator(t,n.emitEvent)}let e=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new lt(this.value,e)),this._events.next(new Fe(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(L(E({},n),{sourceControl:e}))}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?qe:Ue}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n,e){if(this.asyncValidator){this.status=De,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let t=Ai(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:e,shouldHaveEmitted:n})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let n=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,n}return!1}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(n){let e=n;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((t,o)=>t&&t._find(o),this)}getError(n,e){let t=e?this.get(e):this;return t&&t.errors?t.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n,e,t){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),(n||t)&&this._events.next(new Fe(this.status,e)),this._parent&&this._parent._updateControlsErrors(n,e,t)}_initObservables(){this.valueChanges=new j,this.statusChanges=new j}_calculateStatus(){return this._allControlsDisabled()?qe:this.errors?nt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(De)?De:this._anyControlsHaveStatus(nt)?nt:Ue}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n,e){let t=!this._anyControlsDirty(),o=this.pristine!==t;this.pristine=t,this._parent&&!n.onlySelf&&this._parent._updatePristine(n,e),o&&this._events.next(new We(this.pristine,e))}_updateTouched(n={},e){this.touched=this._anyControlsTouched(),this._events.next(new Ge(this.touched,e)),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,e)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){ct(n)&&n.updateOn!=null&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){let e=this._parent&&this._parent.dirty;return!n&&!!e&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=yn(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=xn(this._rawAsyncValidators)}};var Ot=new pe("CallSetDisabledState",{providedIn:"root",factory:()=>ut}),ut="always";function En(i,n){return[...n.path,i]}function wn(i,n,e=ut){Dn(i,n),n.valueAccessor.writeValue(i.value),(i.disabled||e==="always")&&n.valueAccessor.setDisabledState?.(i.disabled),Fn(i,n),Sn(i,n),kn(i,n),An(i,n)}function vi(i,n){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function An(i,n){if(n.valueAccessor.setDisabledState){let e=t=>{n.valueAccessor.setDisabledState(t)};i.registerOnDisabledChange(e),n._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}function Dn(i,n){let e=gn(i);n.validator!==null?i.setValidators(mi(e,n.validator)):typeof e=="function"&&i.setValidators([e]);let t=vn(i);n.asyncValidator!==null?i.setAsyncValidators(mi(t,n.asyncValidator)):typeof t=="function"&&i.setAsyncValidators([t]);let o=()=>i.updateValueAndValidity();vi(n._rawValidators,o),vi(n._rawAsyncValidators,o)}function Fn(i,n){n.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&Ni(i,n)})}function kn(i,n){n.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&Ni(i,n),i.updateOn!=="submit"&&i.markAsTouched()})}function Ni(i,n){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function Sn(i,n){let e=(t,o)=>{n.valueAccessor.writeValue(t),o&&n.viewToModelUpdate(t)};i.registerOnChange(e),n._registerOnDestroy(()=>{i._unregisterOnChange(e)})}function Mn(i,n){if(!i.hasOwnProperty("model"))return!1;let e=i.model;return e.isFirstChange()?!0:!Object.is(n,e.currentValue)}function Tn(i){return Object.getPrototypeOf(i.constructor)===an}function Pn(i,n){if(!n)return null;Array.isArray(n);let e,t,o;return n.forEach(a=>{a.constructor===Ei?e=a:Tn(a)?t=a:o=a}),o||t||e||null}function bi(i,n){let e=i.indexOf(n);e>-1&&i.splice(e,1)}function _i(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var Nn=class extends Vt{constructor(n=null,e,t){super(_n(e),Cn(t,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ct(e)&&(e.nonNullable||e.initialValueIsDefault)&&(_i(n)?this.defaultValue=n.value:this.defaultValue=n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(t=>t(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){bi(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){bi(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(n){_i(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};var In={provide:Ke,useExisting:Ie(()=>Lt)},yi=Promise.resolve(),Lt=(()=>{let n=class n extends Ke{constructor(t,o,a,d,r,s){super(),this._changeDetectorRef=r,this.callSetDisabledState=s,this.control=new Nn,this._registered=!1,this.name="",this.update=new j,this._parent=t,this._setValidators(o),this._setAsyncValidators(a),this.valueAccessor=Pn(this,d)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let o=t.name.previousValue;this.formDirective.removeControl({name:o,path:this._getPath(o)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Mn(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){wn(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){yi.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let o=t.isDisabled.currentValue,a=o!==0&&ai(o);yi.then(()=>{a&&!this.control.disabled?this.control.disable():!a&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?En(t,this._parent):[t]}};n.\u0275fac=function(o){return new(o||n)(P(st,9),P(un,10),P(hn,10),P(dt,10),P(ve,8),P(Ot,8))},n.\u0275dir=z({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ge([In]),xe,Oe]});let i=n;return i})(),Ii=(()=>{let n=class n{};n.\u0275fac=function(o){return new(o||n)},n.\u0275dir=z({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let i=n;return i})();var Vn=new pe("");var Vi=(()=>{let n=class n{};n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=$({type:n}),n.\u0275inj=K({});let i=n;return i})();var Oi=(()=>{let n=class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ot,useValue:t.callSetDisabledState??ut}]}}};n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=$({type:n}),n.\u0275inj=K({imports:[Vi]});let i=n;return i})(),Li=(()=>{let n=class n{static withConfig(t){return{ngModule:n,providers:[{provide:Vn,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Ot,useValue:t.callSetDisabledState??ut}]}}};n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=$({type:n}),n.\u0275inj=K({imports:[Vi]});let i=n;return i})();var Hi=(()=>{let n=class n{};n.\u0275fac=function(o){return new(o||n)},n.\u0275dir=z({type:n,selectors:[["mat-label"]],standalone:!0});let i=n;return i})();var $e=(()=>{let n=class n{};n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=$({type:n}),n.\u0275inj=K({imports:[Ae,tt,ci,Ae]});let i=n;return i})();var ji=(()=>{let n=class n{};n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=$({type:n}),n.\u0275inj=K({});let i=n;return i})();var zi=(()=>{let n=class n{};n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=$({type:n}),n.\u0275inj=K({imports:[Ae,$e,$e,ji,Ae]});let i=n;return i})();var Bn=new WeakMap,Y=Symbol("STATE_SOURCE");function Qe(i,...n){i[Y].update(e=>n.reduce((t,o)=>E(E({},t),typeof o=="function"?o(t):o),e)),jn(i)}function Rn(i){return i[Y]()}function Hn(i){return Bn.get(i[Y][Ut])||[]}function jn(i){let n=Hn(i);for(let e of n){let t=te(()=>Rn(i));e(t)}}function Ui(i){let n=te(()=>i());return zn(n)?new Proxy(i,{get(e,t){return t in n?(Jt(e[t])||Object.defineProperty(e,t,{value:ee(()=>e()[t]),configurable:!0}),Ui(e[t])):e[t]}}):i}function zn(i){return i?.constructor===Object}function qi(...i){let n=[...i],e=typeof n[0]=="function"?{}:n.shift(),t=n;return(()=>{class a{constructor(){let r=t.reduce((b,y)=>y(b),Un()),{stateSignals:s,computedSignals:l,methods:u,hooks:h}=r,f=E(E(E({},s),l),u);this[Y]=e.protectedState===!1?r[Y]:r[Y].asReadonly();for(let b in f)this[b]=f[b];let{onInit:g,onDestroy:v}=h;g&&g(),v&&ye(Yt).onDestroy(v)}static \u0275fac=function(s){return new(s||a)};static \u0275prov=me({token:a,factory:a.\u0275fac,providedIn:e.providedIn||null})}return a})()}function Un(){return{[Y]:Ce({}),stateSignals:{},computedSignals:{},methods:{},hooks:{}}}function Wi(i){return n=>{let e=i(E(E({},n.stateSignals),n.computedSignals));return Object.keys(e),L(E({},n),{computedSignals:E(E({},n.computedSignals),e)})}}function Gi(i){return n=>{let e=i(E(E(E({[Y]:n[Y]},n.stateSignals),n.computedSignals),n.methods));return Object.keys(e),L(E({},n),{methods:E(E({},n.methods),e)})}}function Ki(i){return n=>{let e=typeof i=="function"?i():i,t=Object.keys(e);n[Y].update(a=>E(E({},a),e));let o=t.reduce((a,d)=>{let r=ee(()=>n[Y]()[d]);return L(E({},a),{[d]:Ui(r)})},{});return L(E({},n),{stateSignals:E(E({},n.stateSignals),o)})}}var qn={notes:Wn(),isLoading:!1,filter:{query:""}};function Wn(){let i=localStorage.getItem("notes");return i?JSON.parse(i).map(e=>L(E({},e),{createdAt:new Date(e.createdAt),updatedAt:e.updatedAt?new Date(e.updatedAt):void 0,deletedAt:e.deletedAt?new Date(e.deletedAt):void 0})):[]}var $i=qi({providedIn:"root"},Ki(qn),Wi(({notes:i,filter:n})=>({notesCount:ee(()=>i().length),filteredNotes:ee(()=>n.query()?i().filter(e=>e.title?.toLowerCase().includes(n.query().toLowerCase())):i())})),Gi(i=>({updateQuery(n){Qe(i,e=>({filter:L(E({},e.filter),{query:n})}))},getNoteById:n=>i.notes().find(e=>e.id===n),addNote:n=>{Qe(i,e=>{let t=[...e.notes,n];return localStorage.setItem("notes",JSON.stringify(t)),L(E({},e),{notes:t})})},deleteNote:n=>{Qe(i,e=>{let t=e.notes.filter(o=>o.id!==n);return localStorage.setItem("notes",JSON.stringify(t)),L(E({},e),{notes:t})})},updateNote:n=>{Qe(i,e=>{let t=e.notes.map(o=>o.id===n.id?n:o);return localStorage.setItem("notes",JSON.stringify(t)),L(E({},e),{notes:t})})}})));var ht=class{constructor(n,e="",t="",o=it.primaryColor,a=new Date,d=void 0,r=void 0){this.id=n,this.title=e,this.content=t,this.hexColor=o,this.createdAt=a,this.updatedAt=d,this.deletedAt=r,this.id=n,this.title=e,this.content=t,this.hexColor=o,this.createdAt=a,this.updatedAt=d,this.deletedAt=r}};var nn=sn(Qi());var Gn=["hueSlider"],Kn=["alphaSlider"];function $n(i,n){if(i&1){let e=H();A(0,"div",10),T("newValue",function(o){I(e);let a=F();return V(a.onSliderChange("saturation-lightness",o))}),A(1,"div",11),R(2,"div"),M()()}if(i&2){let e=F();ue("background-color",e.hueSliderColor),k("rgX",1)("rgY",1),D(),ue("top",e.slider==null?null:e.slider.v,"px")("left",e.slider==null?null:e.slider.s,"px")}}function Qn(i,n){if(i&1&&(A(0,"div",12),R(1,"div",13)(2,"div",14),M()),i&2){let e=F();D(2),ue("background-color",e.selectedColor)}}function Yn(i,n){if(i&1){let e=H();A(0,"div",15,1),T("newValue",function(o){I(e);let a=F();return V(a.onSliderChange("hue",o))}),A(2,"div",16)(3,"div"),R(4,"div"),M()()()}if(i&2){let e=F();k("rgX",1),D(2),ue("left",e.slider==null?null:e.slider.h,"px")}}function Xn(i,n){if(i&1){let e=H();A(0,"div",17,2),T("newValue",function(o){I(e);let a=F();return V(a.onSliderChange("alpha",o))}),R(2,"div",18),A(3,"div",16)(4,"div"),R(5,"div"),M()()()}if(i&2){let e=F();k("rgX",1),D(2),k("ngStyle",e.getBackgroundColor(e.alphaSliderColor)),D(),ue("left",e.slider==null?null:e.slider.a,"px")}}var Zn=["dialog"],Zi=i=>({background:i});function Jn(i,n){i&1&&R(0,"div",12)}function eo(i,n){if(i&1){let e=H();Ee(0),A(1,"div",9)(2,"div",10),T("click",function(){let o=I(e).$implicit,a=F(2);return V(a.onColorClick(o))}),W(3,Jn,1,0,"div",11),M()(),we()}if(i&2){let e=n.$implicit,t=n.index,o=F(2);D(2),se("colornull",!e),k("ngStyle",o.getBackgroundColor(e)),D(),k("ngIf",t==o.indexSeleccionado)}}function to(i,n){if(i&1&&R(0,"div",18),i&2){let e=F(3);k("ngStyle",e.getBackgroundColor(e.color))}}function io(i,n){if(i&1){let e=H();A(0,"div",13),T("click",function(){I(e);let o=F(2);return V(o.addColor())}),W(1,to,1,1,"div",14),Xe(),A(2,"svg",15),R(3,"path",16)(4,"path",17),M()()}if(i&2){let e=F(2);D(),k("ngIf",e.indexSeleccionado===void 0)}}function no(i,n){if(i&1){let e=H();A(0,"color-picker",19),T("colorChange",function(o){I(e);let a=F(2);return V(a.onChangeColorPicker(o))})("onAlphaChange",function(o){I(e);let a=F(2);return V(a.onAlphaChange(o))}),M()}if(i&2){let e=F(2);k("controls",e.colorPickerControls)("color",e.hsva)}}function oo(i,n){if(i&1&&(Ee(0),A(1,"div",5),W(2,eo,4,4,"ng-container",6)(3,io,5,1,"div",7)(4,no,1,2,"color-picker",8),M(),we()),i&2){let e=F();D(),k("@colorsAnimation",e.colorsAnimationEffect),D(),k("ngForOf",e.palette),D(),k("ngIf",!e.hideColorPicker&&e.colorPickerControls!="only-alpha"),D(),k("ngIf",!e.hideColorPicker&&e.colorPickerControls=="only-alpha")}}function ro(i,n){i&1&&R(0,"div",12)}function so(i,n){if(i&1){let e=H();Ee(0),A(1,"div",9)(2,"div",25),T("click",function(){let o=I(e).$implicit,a=F(2);return V(a.changeColor(o))}),W(3,ro,1,0,"div",11),M()(),we()}if(i&2){let e=n.$implicit,t=F(2);D(2),se("colornull",!e),k("ngStyle",Ft(4,Zi,e)),D(),k("ngIf",t.isSelected(e))}}function ao(i,n){if(i&1){let e=H();Ee(0),A(1,"div",5)(2,"div",20)(3,"div",21),T("click",function(){I(e);let o=F();return V(o.onClickBack())}),Xe(),A(4,"svg",22),R(5,"path",23)(6,"path",24),M()()(),W(7,so,4,6,"ng-container",6),M(),we()}if(i&2){let e=F();D(),k("@colorsAnimation",e.colorsAnimationEffect),D(6),k("ngForOf",e.variants)}}function lo(i,n){if(i&1){let e=H();Ee(0),A(1,"div",26)(2,"div",27),T("click",function(){I(e);let o=F();return V(o.onClickBack())}),Xe(),A(3,"svg",22),R(4,"path",23)(5,"path",24),M()(),$t(),A(6,"button",28),T("click",function(){I(e);let o=F();return V(o.emitClose("cancel"))}),G(7),M(),A(8,"button",28),T("click",function(){I(e);let o=F();return V(o.emitClose("accept"))}),G(9),M()(),A(10,"div",29)(11,"color-picker",30),T("sliderChange",function(o){I(e);let a=F();return V(a.onChangeColorPicker(o))}),M()(),we()}if(i&2){let e=F();D(7),Dt(" ",e.cancelLabel," "),D(2),Dt(" ",e.acceptLabel," "),D(2),k("controls",e.colorPickerControls)("color",e.hsva)}}function co(i,n){if(i&1){let e=H();A(0,"div",31)(1,"p",32),T("click",function(){I(e);let o=F();return V(o.nextFormat())}),G(2),M(),A(3,"div",33)(4,"input",34,1),T("keyup",function(){I(e);let o=wt(5),a=F();return V(a.changeColorManual(o.value))})("keydown.enter",function(){I(e);let o=F();return V(o.emitClose("accept"))}),M()()()}if(i&2){let e=F();D(2),At(e.colorFormats[e.format]),D(2),ue("font-size",e.color&&e.color.length>23?9:10,"px")("letter-spacing",e.color&&e.color.length>16?0:1.5,"px"),k("placeholder",e.placeholder)("value",e.color)}}var Bt=["hex","rgba","hsla","cmyk"],q=function(i){return i[i.HEX=0]="HEX",i[i.RGBA=1]="RGBA",i[i.HSLA=2]="HSLA",i[i.CMYK=3]="CMYK",i}(q||{}),Yi=[{color:"rojo",preview:"#E57373",variants:["#FFEBEE","#FFCDD2","#EF9A9A","#E57373","#EF5350","#F44336","#E53935","#D32F2F","#C62828"]},{color:"rosa",preview:"#F06292",variants:["#FCE4EC","#F8BBD0","#F48FB1","#F06292","#EC407A","#E91E63","#D81B60","#C2185B","#AD1457"]},{color:"purpura",preview:"#BA68C8",variants:["#F3E5F5","#E1BEE7","#CE93D8","#BA68C8","#AB47BC","#9C27B0","#8E24AA","#7B1FA2","#6A1B9A"]},{color:"purpura oscuro",preview:"#9575CD",variants:["#EDE7F6","#D1C4E9","#B39DDB","#9575CD","#7E57C2","#673AB7","#5E35B1","#512DA8","#4527A0"]},{color:"indigo",preview:"#7986CB",variants:["#E8EAF6","#C5CAE9","#9FA8DA","#7986CB","#5C6BC0","#3F51B5","#3949AB","#303F9F","#283593"]},{color:"azul",preview:"#64B5F6",variants:["#E3F2FD","#BBDEFB","#90CAF9","#64B5F6","#42A5F5","#2196F3","#1E88E5","#1976D2","#1565C0"]},{color:"celeste",preview:"#4FC3F7",variants:["#E1F5FE","#B3E5FC","#81D4FA","#4FC3F7","#29B6F6","#03A9F4","#039BE5","#0288D1","#0277BD"]},{color:"cyan",preview:"#4DD0E1",variants:["#E0F7FA","#B2EBF2","#80DEEA","#4DD0E1","#26C6DA","#00BCD4","#00ACC1","#0097A7","#00838F"]},{color:"color",preview:"#4DB6AC",variants:["#E0F2F1","#B2DFDB","#80CBC4","#4DB6AC","#26A69A","#009688","#00897B","#00796B","#00695C"]},{color:"verde",preview:"#81C784",variants:["#E8F5E9","#C8E6C9","#A5D6A7","#81C784","#66BB6A","#4CAF50","#43A047","#388E3C","#2E7D32"]},{color:"verde claro",preview:"#AED581",variants:["#F1F8E9","#DCEDC8","#C5E1A5","#AED581","#9CCC65","#8BC34A","#7CB342","#689F38","#558B2F"]},{color:"lima",preview:"#DCE775",variants:["#F9FBE7","#F0F4C3","#E6EE9C","#DCE775","#D4E157","#CDDC39","#C0CA33","#AFB42B","#9E9D24"]},{color:"amarillo",preview:"#FFF176",variants:["#FFFDE7","#FFF9C4","#FFF59D","#FFF176","#FFEE58","#FFEB3B","#FDD835","#FBC02D","#F9A825"]},{color:"ambar",preview:"#FFD54F",variants:["#FFF8E1","#FFECB3","#FFE082","#FFD54F","#FFCA28","#FFC107","#FFB300","#FFA000","#FF8F00"]},{color:"naranja",preview:"#FFB74D",variants:["#FFF3E0","#FFE0B2","#FFCC80","#FFB74D","#FFA726","#FF9800","#FB8C00","#F57C00","#EF6C00"]},{color:"naranja oscuro",preview:"#FF8A65",variants:["#FBE9E7","#FFCCBC","#FFAB91","#FF8A65","#FF7043","#FF5722","#F4511E","#E64A19","#D84315"]},{color:"marron",preview:"#A1887F",variants:["#EFEBE9","#D7CCC8","#BCAAA4","#A1887F","#8D6E63","#795548","#6D4C41","#5D4037","#4E342E"]},{color:"escala de grises",preview:"#E0E0E0",variants:["#FFFFFF","#FAFAFA","#F5F5F5","#EEEEEE","#E0E0E0","#BDBDBD","#9E9E9E","#757575","#616161","#424242","#000000"]},{color:"azul gris",preview:"#90A4AE",variants:["#ECEFF1","#CFD8DC","#B0BEC5","#90A4AE","#78909C","#607D8B","#546E7A","#455A64","#37474F"]}],ie=class{constructor(n,e,t,o){this.r=n,this.g=e,this.b=t,this.a=o}denormalize(){return this.r=Math.round(this.r*255),this.g=Math.round(this.g*255),this.b=Math.round(this.b*255),this}toString(){return this.denormalize(),"rgb"+(this.a!=1?"a(":"(")+this.r+", "+this.g+", "+this.b+(this.a!=1?", "+this.a.toPrecision(2)+")":")")}},X=class{constructor(n,e,t,o){this.h=n,this.s=e,this.v=t,this.a=o,this.onChange=new j(!0)}onColorChange(n){this.s=n.s/n.rgX,this.v=n.v/n.rgY}onHueChange(n){this.h=n.v/n.rgX}onValueChange(n){this.v=n.v/n.rgX}onAlphaChange(n){this.a=n.v/n.rgX}},_e=class{constructor(n,e,t,o){this.h=n,this.s=e,this.l=t,this.a=o}denormalize(){return this.h=Math.round(this.h*360),this.s=Math.round(this.s*100),this.l=Math.round(this.l*100),this}toString(){return"hsl"+(this.a!=1?"a(":"(")+this.h+", "+this.s+"%, "+this.l+"%"+(this.a!=1?", "+this.a.toPrecision(2)+")":")")}},fe=class{constructor(n,e,t,o,a=1){this.c=n,this.m=e,this.y=t,this.k=o,this.a=a}denormalize(){return this.c=Math.round(this.c*100),this.m=Math.round(this.m*100),this.y=Math.round(this.y*100),this.k=Math.round(this.k*100),this}toString(){return this.denormalize(),"cmyk("+this.c+", "+this.m+", "+this.y+", "+this.k+")"}},Rt=class{constructor(n){n&&(this.preview=n.preview,this.variants=n.variants)}},gt=(()=>{class i{constructor(){}toFormat(e,t){var o="";if(e)switch(t){case q.HEX:var d=this.hsvaToRgba(e);d.denormalize();var o=this.rgbaToHex(d,!0);break;case q.HSLA:var a=this.hsva2hsla(e);a.denormalize();var o=a.toString();break;case q.RGBA:var d=this.hsvaToRgba(e),o=d.toString();break;case q.CMYK:var r=this.hsvaToCmyk(e),o=r.toString();break}return o}stringToFormat(e,t){var o=this.stringToHsva(e,!0);return this.toFormat(o,t)}hsva2hsla(e){let t=e.h,o=e.s,a=e.v,d=e.a;if(a===0)return new _e(t,0,0,d);if(o===0&&a===1)return new _e(t,1,1,d);{let r=a*(2-o)/2;return new _e(t,a*o/(1-Math.abs(2*r-1)),r,d)}}hsla2hsva(e){let t=Math.min(e.h,1),o=Math.min(e.s,1),a=Math.min(e.l,1),d=Math.min(e.a,1);if(a===0)return new X(t,0,0,d);{let r=a+o*(1-Math.abs(2*a-1))/2;return new X(t,2*(r-a)/r,r,d)}}hsvaToRgba(e){let t,o,a,d=e.h,r=e.s,s=e.v,l=e.a,u=Math.floor(d*6),h=d*6-u,f=s*(1-r),g=s*(1-h*r),v=s*(1-(1-h)*r);switch(u%6){case 0:t=s,o=v,a=f;break;case 1:t=g,o=s,a=f;break;case 2:t=f,o=s,a=v;break;case 3:t=f,o=g,a=s;break;case 4:t=v,o=f,a=s;break;case 5:t=s,o=f,a=g;break;default:t=0,o=0,a=0}return new ie(t,o,a,l)}cmykToRgb(e){let t=(1-e.c)*(1-e.k),o=(1-e.m)*(1-e.k),a=(1-e.y)*(1-e.k);return new ie(t,o,a,e.a)}rgbaToCmyk(e){let t=1-Math.max(e.r,e.g,e.b);if(t===1)return new fe(0,0,0,1,e.a);{let o=(1-e.r-t)/(1-t),a=(1-e.g-t)/(1-t),d=(1-e.b-t)/(1-t);return new fe(o,a,d,t,e.a)}}hsvaToCmyk(e){let t=this.hsvaToRgba(e);return this.rgbaToCmyk(t)}rgbaToHsva(e){let t,o,a=Math.min(e.r,1),d=Math.min(e.g,1),r=Math.min(e.b,1),s=Math.min(e.a,1),l=Math.max(a,d,r),u=Math.min(a,d,r),h=l,f=l-u;if(o=l===0?0:f/l,l===u)t=0;else{switch(l){case a:t=(d-r)/f+(d<r?6:0);break;case d:t=(r-a)/f+2;break;case r:t=(a-d)/f+4;break;default:t=0}t/=6}return new X(t,o,h,s)}rgbaToHex(e,t){let o="#"+(16777216|e.r<<16|e.g<<8|e.b).toString(16).substr(1);return e.a!=1&&(o+=(256|Math.round(e.a*255)).toString(16).substr(1)),o}normalizeCMYK(e){return new fe(e.c/100,e.m/100,e.y/100,e.k/100,e.a)}denormalizeCMYK(e){return new fe(Math.floor(e.c*100),Math.floor(e.m*100),Math.floor(e.y*100),Math.floor(e.k*100),e.a)}denormalizeRGBA(e){return new ie(Math.round(e.r*255),Math.round(e.g*255),Math.round(e.b*255),e.a)}stringToHsva(e="",t=!0){let o=null;e=(e||"").toLowerCase();let a=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(d){return new ie(parseInt(d[2],10)/255,parseInt(d[3],10)/255,parseInt(d[4],10)/255,isNaN(parseFloat(d[5]))?1:parseFloat(d[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(d){return new _e(parseInt(d[2],10)/360,parseInt(d[3],10)/100,parseInt(d[4],10)/100,isNaN(parseFloat(d[5]))?1:parseFloat(d[5]))}},{re:/cmyk?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(d){return new fe(parseInt(d[1],10)/100,parseInt(d[2],10)/100,parseInt(d[3],10)/100,parseInt(d[4],10)/100)}}];t?a.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(d){return new ie(parseInt(d[1],16)/255,parseInt(d[2],16)/255,parseInt(d[3],16)/255,parseInt(d[4]||"FF",16)/255)}}):a.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(d){return new ie(parseInt(d[1],16)/255,parseInt(d[2],16)/255,parseInt(d[3],16)/255,1)}}),a.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(d){return new ie(parseInt(d[1]+d[1],16)/255,parseInt(d[2]+d[2],16)/255,parseInt(d[3]+d[3],16)/255,1)}});for(let d in a)if(a.hasOwnProperty(d)){let r=a[d],s=r.re.exec(e),l=s&&r.parse(s);if(l){if(l instanceof ie)o=this.rgbaToHsva(l);else if(l instanceof _e)o=this.hsla2hsva(l);else if(l instanceof fe){let u=this.cmykToRgb(l);o=this.rgbaToHsva(u)}return o}}return o}outputFormat(e){return this.hsvaToRgba(e).toString()}getFormatByString(e){if(e){e=e.toLowerCase();let t=/(#([\da-f]{3}(?:[\da-f]{3})?(?:[\da-f]{2})?))/,o=/(rgba\((\d{1,3},\s?){3}(1|0?\.\d+)\)|rgb\(\d{1,3}(,\s?\d{1,3}){2}\))/,a=/(hsla\((\d{1,3}%?,\s?){3}(1|0?\.\d+)\)|hsl\(\d{1,3}%?(,\s?\d{1,3}%?){2}\))/,d=/(cmyk\(\d{1,3}(,\s?\d{1,3}){3}\))/;if(t.test(e))return"hex";if(o.test(e))return"rgba";if(a.test(e))return"hsla";if(d.test(e))return"cmyk"}return"hex"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=me({token:i,factory:i.\u0275fac}),i})(),pt=class{constructor(n,e,t,o){this.h=n,this.s=e,this.v=t,this.a=o}},Ht=class{constructor(n,e,t,o){this.h=n,this.s=e,this.v=t,this.a=o}},uo=(()=>{class i{mouseDown(e){this.start(e)}touchStart(e){this.start(e)}constructor(e){this.elRef=e,this.dragEnd=new j,this.dragStart=new j,this.newValue=new j,this.listenerMove=t=>this.move(t),this.listenerStop=()=>this.stop()}move(e){e.preventDefault(),this.setCursor(e)}start(e){this.setCursor(e),e.stopPropagation(),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),this.dragStart.emit()}stop(){document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop),document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),this.dragEnd.emit()}getX(e){let t=this.elRef.nativeElement.getBoundingClientRect();return(e.pageX!==void 0?e.pageX:e.touches[0].pageX)-t.left-window.pageXOffset}getY(e){let t=this.elRef.nativeElement.getBoundingClientRect();return(e.pageY!==void 0?e.pageY:e.touches[0].pageY)-t.top-window.pageYOffset}setCursor(e){let t=this.elRef.nativeElement.offsetWidth,o=this.elRef.nativeElement.offsetHeight,a=Math.max(0,Math.min(this.getX(e),t)),d=Math.max(0,Math.min(this.getY(e),o));this.rgX!==void 0&&this.rgY!==void 0?this.newValue.emit({s:a/t,v:1-d/o,rgX:this.rgX,rgY:this.rgY}):this.rgX===void 0&&this.rgY!==void 0?this.newValue.emit({v:d/o,rgY:this.rgY}):this.rgX!==void 0&&this.rgY===void 0&&this.newValue.emit({v:a/t,rgX:this.rgX})}}return i.\u0275fac=function(e){return new(e||i)(P(re))},i.\u0275dir=z({type:i,selectors:[["","slider",""]],hostBindings:function(e,t){e&1&&T("mousedown",function(a){return t.mouseDown(a)})("touchstart",function(a){return t.touchStart(a)})},inputs:{rgX:"rgX",rgY:"rgY",slider:"slider"},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"}}),i})(),ho=(()=>{class i{constructor(e,t){this.service=e,this.cdr=t,this.color=new X(0,1,1,1),this.controls="default",this.sliderChange=new j(!1),this.onAlphaChange=new j(!1),this.hsva=new X(0,1,1,1),this.selectedColor="#000000",this.fallbackColor="#000000"}ngOnInit(){this.color||(this.color=new X(0,1,1,1)),this.slider=new pt(0,0,0,0),this.update()}ngOnDestroy(){}ngOnChanges(e){e.color&&this.color&&this.update()}ngAfterViewInit(){let e=this.hueSlider?.nativeElement.offsetWidth||140,t=this.alphaSlider?.nativeElement.offsetWidth||140;this.sliderDimMax=new Ht(e,220,130,t),this.update()}onSliderChange(e,t){switch(e){case"saturation-lightness":this.hsva.onColorChange(t);break;case"hue":this.hsva.onHueChange(t);break;case"alpha":this.hsva.onAlphaChange(t),this.onAlphaChange.emit(t);break;case"value":this.hsva.onValueChange(t);break}this.update(),this.setColor(this.outputColor)}setColor(e){this.color=e,this.sliderChange.emit(this.color)}getBackgroundColor(e){return{background:"linear-gradient(90deg, rgba(36,0,0,0) 0%, "+e+" 100%)"}}update(){if(this.hsva=this.color,this.sliderDimMax){let e=this.service.hsvaToRgba(this.hsva).denormalize(),t=this.service.hsvaToRgba(new X(this.hsva.h,1,1,1)).denormalize();this.hueSliderColor="rgb("+t.r+","+t.g+","+t.b+")",this.alphaSliderColor="rgb("+e.r+","+e.g+","+e.b+")",this.outputColor=this.hsva,this.selectedColor=this.service.hsvaToRgba(this.hsva).toString(),this.slider=new pt(this.hsva.h*this.sliderDimMax.h-5,this.hsva.s*this.sliderDimMax.s-8,(1-this.hsva.v)*this.sliderDimMax.v-8,this.hsva.a*this.sliderDimMax.a-5),this.cdr.detectChanges()}}}return i.\u0275fac=function(e){return new(e||i)(P(gt),P(ve))},i.\u0275cmp=oe({type:i,selectors:[["color-picker"]],viewQuery:function(e,t){if(e&1&&(Le(Gn,5),Le(Kn,5)),e&2){let o;Be(o=Re())&&(t.hueSlider=o.first),Be(o=Re())&&(t.alphaSlider=o.first)}},inputs:{color:"color",controls:"controls"},outputs:{sliderChange:"sliderChange",onAlphaChange:"onAlphaChange"},features:[Oe],decls:8,vars:4,consts:[["dialogPopup",""],["hueSlider",""],["alphaSlider",""],[1,"color-picker",3,"click"],["class","saturation-lightness",3,"slider","rgX","rgY","background-color","newValue",4,"ngIf"],[1,"hue-alpha","box"],["class","left",4,"ngIf"],[1,"right"],["class","hue",3,"slider","rgX","newValue",4,"ngIf"],["class","alpha",3,"slider","rgX","newValue",4,"ngIf"],[1,"saturation-lightness",3,"newValue","slider","rgX","rgY"],[1,"cursor"],[1,"left"],[1,"selected-color-background"],[1,"selected-color"],[1,"hue",3,"newValue","slider","rgX"],[1,"sliderCursor"],[1,"alpha",3,"newValue","slider","rgX"],[1,"alpha-gradient",3,"ngStyle"]],template:function(e,t){if(e&1){let o=H();A(0,"div",3,0),T("click",function(d){return I(o),V(d.stopPropagation())}),W(2,$n,3,8,"div",4),A(3,"div",5),W(4,Qn,3,2,"div",6),A(5,"div",7),W(6,Yn,5,3,"div",8)(7,Xn,6,4,"div",9),M()()()}e&2&&(D(2),k("ngIf",t.controls!="only-alpha"),D(2),k("ngIf",t.controls!="only-alpha"),D(2),k("ngIf",t.controls!="only-alpha"),D(),k("ngIf",t.controls!="no-alpha"))},dependencies:[St,et,uo],styles:[`.color-picker{position:relative;z-index:1000;width:220px;height:auto;cursor:default;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;touch-action:none}.color-picker *{box-sizing:border-box;margin:0;font-size:11px}.color-picker input{width:0;height:26px;min-width:0;font-size:13px;text-align:center;color:#000}.color-picker input:invalid,.color-picker input:-moz-ui-invalid,.color-picker input:-moz-submit-invalid{box-shadow:none}.color-picker input::-webkit-inner-spin-button,.color-picker input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none}.color-picker .sliderCursor{width:10px;border-radius:5px;position:absolute;margin-top:-3px;border:1px solid black}.color-picker .sliderCursor>div{border:2px solid white;border-radius:5px}.color-picker .sliderCursor>div>div{border-radius:5px;border:1px solid black;height:24px}.color-picker .cursor{position:absolute;width:21px;border:3px solid black;border-radius:100%;margin:-2px 0 0 -2px}.color-picker .cursor>div{height:15px;border:3px solid white;border-radius:100%}.color-picker .box{display:flex;padding:4px 8px}.color-picker .left{position:relative;padding:16px 8px}.color-picker .right{flex:1 1 auto;display:flex;flex-direction:column;gap:10px;padding:12px 8px}.color-picker .hue-alpha{display:flex;align-items:center;margin-bottom:3px}.color-picker .hue{direction:ltr;width:100%;height:24px;border:none;border-radius:5px;position:relative;cursor:pointer;background-size:100% 100%;background:linear-gradient(to right,red 0%,#ff0 17%,lime 33%,cyan 50%,blue 66%,#f0f 83%,red 100%)}.color-picker .alpha{direction:ltr;position:relative;width:100%;height:24px;border:none;border-radius:5px;cursor:pointer;background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.color-picker .alpha-gradient{width:100%;height:100%;border-radius:5px;position:absolute}.color-picker .selected-color{position:absolute;top:16px;left:8px;width:40px;height:40px;box-shadow:0 1px 1px 1px #00000026;border-radius:50%}.color-picker .selected-color-background{width:40px;height:40px;border-radius:50%;background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.color-picker .saturation-lightness{direction:ltr;cursor:crosshair;width:100%;position:relative;height:130px;border:none;touch-action:manipulation;background-image:linear-gradient(to top,#000 0%,transparent 100%),linear-gradient(to right,#fff 0%,transparent 100%)}
`],encapsulation:2}),i})(),fo=(()=>{class i{click(e){this.isOutside(e)&&this.emitClose("cancel")}onScroll(){this.onScreenMovement()}onResize(){this.onScreenMovement()}constructor(e,t){this.service=e,this.cdr=t,this.color="#000000",this.previewColor="#000000",this.hsva=new X(0,1,1,1),this.colorsAnimationEffect="slide-in",this.palette=Yi,this.variants=[],this.userFormats=[],this.colorFormats=Bt,this.format=q.HEX,this.formatMap={hex:q.HEX,rgba:q.RGBA,hsla:q.HSLA,cmyk:q.CMYK},this.canChangeFormat=!0,this.menu=1,this.hideColorPicker=!1,this.hideTextInput=!1,this.colorPickerControls="default",this.placeholder="#FFFFFF"}ngOnInit(){this.setPosition(),this.hsva=this.service.stringToHsva(this.color),this.indexSeleccionado=this.findIndexSelectedColor(this.palette)}ngAfterViewInit(){this.setPositionY()}onScreenMovement(){this.setPosition(),this.setPositionY(),this.panelRef.nativeElement.style.transition||(this.panelRef.nativeElement.style.transition="transform 0.5s ease-out")}findIndexSelectedColor(e){let t;if(this.color)for(let o=0;o<e.length;o++){let a=e[o];typeof a=="string"?this.service.stringToFormat(this.color,q.HEX)==this.service.stringToFormat(a,q.HEX)&&(t=o):a===void 0?this.color=void 0:this.findIndexSelectedColor(a.variants)!=null&&(t=o)}return t}iniciate(e,t,o,a,d,r,s,l,u,h,f,g,v=[]){if(this.colorPickerControls=f,this.triggerInstance=e,this.TriggerBBox=t,this.color=o,this.hideColorPicker=l,this.hideTextInput=s,this.acceptLabel=u,this.cancelLabel=h,v.length&&v.every(y=>Bt.includes(y))&&(this.colorFormats=v),r?this.colorFormats.includes(r)?(this.format=this.colorFormats.indexOf(r.toLowerCase()),this.canChangeFormat=!1,this.service.getFormatByString(this.color)!=r.toLowerCase()&&this.setColor(this.service.stringToHsva(this.color))):(console.error("Format provided is invalid, using HEX"),this.format=q.HEX):(this.format=this.colorFormats.indexOf(this.service.getFormatByString(this.color)),this.format<0&&(this.format=0)),this.previewColor=this.color,this.palette=a??Yi,this.colorsAnimationEffect=d,g=="top"){let b=this.TriggerBBox.nativeElement.getBoundingClientRect();this.positionString="transform: translateY(calc( -100% - "+b.height+"px ))"}}setPosition(){if(this.TriggerBBox){let t=this.TriggerBBox.nativeElement.getBoundingClientRect();this.top=t.top+t.height,t.left+250>window.innerWidth?this.left=t.right<250?window.innerWidth/2-250/2:t.right-250:this.left=t.left}}setPositionY(){let e=this.TriggerBBox.nativeElement.getBoundingClientRect(),t=this.panelRef.nativeElement.getBoundingClientRect(),o=t.height;e.bottom+o>window.innerHeight?this.positionString=e.top<t.height?"transform: translateY(-"+e.bottom+"px );":"transform: translateY(calc( -100% - "+e.height+"px ));":this.positionString="",this.cdr.detectChanges()}hasVariant(e){return this.previewColor?typeof e!="string"&&e.variants.some(t=>t.toUpperCase()==this.previewColor.toUpperCase()):!1}isSelected(e){return this.previewColor?typeof e=="string"&&e.toUpperCase()==this.previewColor.toUpperCase():!1}getBackgroundColor(e){return typeof e=="string"?{background:e}:{background:e?.preview}}onAlphaChange(e){this.palette=this.ChangeAlphaOnPalette(e,this.palette)}ChangeAlphaOnPalette(e,t){var o=[];for(let a=0;a<t.length;a++){let d=t[a];if(typeof d=="string"){let r=this.service.stringToHsva(d);r.onAlphaChange(e),o.push(this.service.toFormat(r,this.format))}else{let r=new Rt,s=this.service.stringToHsva(d.preview);s.onAlphaChange(e),r.preview=this.service.toFormat(s,this.format),r.variants=this.ChangeAlphaOnPalette(e,d.variants),o.push(r)}}return o}changeColor(e){this.setColor(this.service.stringToHsva(e)),this.emitClose("accept")}onChangeColorPicker(e){this.temporalColor=e,this.color=this.service.toFormat(e,this.format),this.triggerInstance.sliderChange(this.service.toFormat(e,this.format))}changeColorManual(e){this.previewColor=e,this.color=e,this.hsva=this.service.stringToHsva(e),this.setPreviewColor(this.hsva),this.temporalColor=this.hsva,this.triggerInstance.setColor(this.color,this.previewColor)}setColor(e,t=-1){this.hsva=e;let o=this.colorFormats[this.format],a=t;a<0&&(a=this.formatMap[o]),this.color=this.service.toFormat(e,a),this.setPreviewColor(e),this.triggerInstance.setColor(this.color,this.previewColor)}setPreviewColor(e){this.previewColor=e?this.service.hsvaToRgba(e).toString():void 0}onChange(){}onColorClick(e){typeof e=="string"||e===void 0?this.changeColor(e):(this.variants=e.variants,this.menu=2)}addColor(){this.menu=3,this.backupColor=this.color,this.temporalColor=this.service.stringToHsva(this.color)}nextFormat(){if(this.canChangeFormat){this.format=(this.format+1)%this.colorFormats.length;let e=this.colorFormats[this.format],t=this.formatMap[e];this.setColor(this.hsva,t),this.placeholder=this.service.toFormat(new X(0,0,1,1),t)}}emitClose(e){this.menu==3&&(e=="cancel"||e=="accept"&&this.setColor(this.temporalColor)),this.triggerInstance.closePanel()}onClickBack(){this.menu==3&&(this.color=this.backupColor,this.hsva=this.service.stringToHsva(this.color)),this.indexSeleccionado=this.findIndexSelectedColor(this.palette),this.menu=1}isOutside(e){return e.target.classList.contains("ngx-colors-overlay")}}return i.\u0275fac=function(e){return new(e||i)(P(gt),P(ve))},i.\u0275cmp=oe({type:i,selectors:[["ngx-colors-panel"]],viewQuery:function(e,t){if(e&1&&Le(Zn,5),e&2){let o;Be(o=Re())&&(t.panelRef=o.first)}},hostVars:4,hostBindings:function(e,t){e&1&&T("mousedown",function(a){return t.click(a)},!1,Ct)("scroll",function(){return t.onScroll()},!1,Ct)("resize",function(){return t.onResize()},!1,Je),e&2&&ue("top",t.top,"px")("left",t.left,"px")},decls:6,vars:6,consts:[["dialog",""],["paintInput",""],[1,"opened"],[4,"ngIf"],["class","manual-input-wrapper",4,"ngIf"],[1,"colors"],[4,"ngFor","ngForOf"],["style","background: rgb(245 245 245); position: relative","class","circle button",3,"click",4,"ngIf"],[3,"controls","color","colorChange","onAlphaChange",4,"ngIf"],[1,"circle","wrapper","color"],[1,"circle","color","circle-border",3,"click","ngStyle"],["class","selected",4,"ngIf"],[1,"selected"],[1,"circle","button",2,"background","rgb(245 245 245)","position","relative",3,"click"],["style",`
            position: absolute;
            height: 7px;
            width: 7px;
            border: 1px solid rgba(0, 0, 0, 0.03);
            border-radius: 100%;
            top: 0;
            right: 0;
          `,3,"ngStyle",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 0 24 24","width","24px","fill","#222222"],["d","M24 24H0V0h24v24z","fill","none","opacity",".87"],["d","M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z"],[2,"position","absolute","height","7px","width","7px","border","1px solid rgba(0, 0, 0, 0.03)","border-radius","100%","top","0","right","0",3,"ngStyle"],[3,"colorChange","onAlphaChange","controls","color"],[1,"circle","wrapper"],[1,"add",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24"],["d","M0 0h24v24H0z","fill","none"],["d","M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"],[1,"circle","circle-border",3,"click","ngStyle"],[1,"nav-wrapper"],[1,"round-button","button",2,"float","left",3,"click"],[2,"float","right",3,"click"],[1,"color-picker-wrapper"],[3,"sliderChange","controls","color"],[1,"manual-input-wrapper"],[2,"cursor","pointer",3,"click"],[1,"g-input"],["type","text",3,"keyup","keydown.enter","placeholder","value"]],template:function(e,t){e&1&&(A(0,"div",2,0),W(2,oo,5,4,"ng-container",3)(3,ao,8,2,"ng-container",3)(4,lo,12,4,"ng-container",3)(5,co,6,7,"div",4),M()),e&2&&(ti(t.positionString),D(2),k("ngIf",t.menu==1),D(),k("ngIf",t.menu==2),D(),k("ngIf",t.menu==3),D(),k("ngIf",!t.hideTextInput))},dependencies:[li,St,et,ho],styles:["[_nghost-%COMP%]{position:fixed;z-index:2001}.hidden[_ngcontent-%COMP%]{display:none}.button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.top[_ngcontent-%COMP%]{transform:translateY(-100%)}.opened[_ngcontent-%COMP%]{box-sizing:border-box;box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;background:#fff;width:250px;border-radius:5px;position:absolute}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;font-family:inherit;font-size:12px;background-color:unset;-webkit-user-select:none;user-select:none;padding:10px;letter-spacing:1px;color:#222;border-radius:3px;line-height:20px}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .opened[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{background-color:#0000000d;transition:opacity .2s cubic-bezier(.35,0,.25,1),background-color .2s cubic-bezier(.35,0,.25,1);transition-property:opacity,background-color;transition-duration:.2s,.2s;transition-timing-function:cubic-bezier(.35,0,.25,1),cubic-bezier(.35,0,.25,1);transition-delay:0s,0s}.opened[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;margin:15px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{height:34px;width:34px;box-sizing:border-box;border-radius:100%;cursor:pointer}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{font-size:20px;line-height:45px;text-align:center}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{border:2px solid white;border-radius:100%;height:28px;width:28px;box-sizing:border-box;margin:2px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.colornull[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(236,236,236,.7) 0%,rgba(236,236,236,.7) 45%,#de0f00 50%,rgba(236,236,236,.7) 55%,rgba(236,236,236,.7) 100%)}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.wrapper[_ngcontent-%COMP%]{margin:0 5px 5px;flex:34px 0 0}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.button[_ngcontent-%COMP%]{margin:0 5px 5px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle.wrapper.color[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}.opened[_ngcontent-%COMP%]   .colors[_ngcontent-%COMP%]   .circle-border[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.03)}.opened[_ngcontent-%COMP%]   .color-picker-wrapper[_ngcontent-%COMP%]{margin:5px 15px}.opened[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]{overflow:hidden;margin:5px}.opened[_ngcontent-%COMP%]   .nav-wrapper[_ngcontent-%COMP%]   .round-button[_ngcontent-%COMP%]{padding:5px 0;width:40px;height:40px;box-sizing:border-box;border-radius:100%;text-align:center;line-height:45px}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]{display:flex;margin:15px;font-family:sans-serif}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;text-align:center;font-size:10px;letter-spacing:1.5px;text-transform:uppercase;line-height:48px;width:145px;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   .g-input[_ngcontent-%COMP%]{border:1px solid #e8ebed;height:45px;border-radius:5px;width:100%}.opened[_ngcontent-%COMP%]   .manual-input-wrapper[_ngcontent-%COMP%]   .g-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:9px;border:none;width:100%;text-transform:uppercase;outline:none;text-align:center;letter-spacing:1px;color:#595b65;height:100%;border-radius:5px;margin:0;padding:0}"],data:{animation:[fi("colorsAnimation",[Pt("void => slide-in",[ze(":enter",ae({opacity:0}),{optional:!0}),ze(":enter",Nt("10ms",[Mt(".3s ease-in",Tt([ae({opacity:0,transform:"translatex(-50%)",offset:0}),ae({opacity:.5,transform:"translatex(-10px) scale(1.1)",offset:.3}),ae({opacity:1,transform:"translatex(0)",offset:1})]))]),{optional:!0})]),Pt("void => popup",[ze(":enter",ae({opacity:0,transform:"scale(0)"}),{optional:!0}),ze(":enter",Nt("10ms",[Mt("500ms ease-out",Tt([ae({opacity:.5,transform:"scale(.5)",offset:.3}),ae({opacity:1,transform:"scale(1.1)",offset:.8}),ae({opacity:1,transform:"scale(1)",offset:1})]))]),{optional:!0})])])]}}),i})(),Xi={position:"fixed",height:"100%",width:"100%","z-index":2e3,top:0,left:0},Ji=(()=>{class i{constructor(e,t,o){this.resolver=e,this.applicationRef=t,this.injector=o}createPanel(e,t){this.componentRef!=null&&this.removePanel();let o=this.resolver.resolveComponentFactory(fo);this.componentRef=o.create(this.injector),this.applicationRef.attachView(this.componentRef.hostView);let a=this.componentRef.hostView.rootNodes[0];return this.overlay=document.createElement("div"),this.overlay.id="ngx-colors-overlay",this.overlay.classList.add("ngx-colors-overlay"),this.overlay.classList.add(t),Object.keys(Xi).forEach(d=>{this.overlay.style[d]=Xi[d]}),e?document.getElementById(e).appendChild(this.overlay):document.body.appendChild(this.overlay),this.overlay.appendChild(a),this.componentRef}removePanel(){this.applicationRef.detachView(this.componentRef.hostView),this.componentRef.destroy(),this.overlay.remove()}}return i.\u0275fac=function(e){return new(e||i)(Ve(Zt),Ve(si),Ve(Ze))},i.\u0275prov=me({token:i,factory:i.\u0275fac}),i})(),Se=(()=>{class i{onClick(){this.openPanel()}constructor(e,t,o){this.triggerRef=e,this.panelFactory=t,this.service=o,this.color="",this.colorsAnimation="slide-in",this.position="bottom",this.attachTo=void 0,this.overlayClassName=void 0,this.colorPickerControls="default",this.acceptLabel="ACCEPT",this.cancelLabel="CANCEL",this.change=new j,this.input=new j,this.slider=new j,this.close=new j,this.open=new j,this.isDisabled=!1,this.onTouchedCallback=()=>{},this.onChangeCallback=()=>{}}ngOnDestroy(){this.panelRef&&this.panelFactory.removePanel()}openPanel(){this.isDisabled||(this.panelRef=this.panelFactory.createPanel(this.attachTo,this.overlayClassName),this.panelRef.instance.iniciate(this,this.triggerRef,this.color,this.palette,this.colorsAnimation,this.format,this.hideTextInput,this.hideColorPicker,this.acceptLabel,this.cancelLabel,this.colorPickerControls,this.position,this.formats)),this.open.emit(this.color)}closePanel(){this.panelFactory.removePanel(),this.onTouchedCallback(),this.close.emit(this.color)}setDisabledState(e){this.isDisabled=e,this.triggerRef.nativeElement.style.opacity=e?.5:1}setColor(e,t=""){this.writeValue(e,t),this.onChangeCallback(e),this.input.emit(e)}sliderChange(e){this.slider.emit(e)}get value(){return this.color}set value(e){this.setColor(e),this.onChangeCallback(e)}writeValue(e,t=""){if(e!==this.color){if(this.format){let a=Bt.indexOf(this.format.toLowerCase());e=this.service.stringToFormat(e,a)}this.color=e;let o=!1;e&&e.startsWith("cmyk")&&(o=!0,t||(t=this.service.stringToFormat(e,q.RGBA))),this.change.emit(o?t:e)}}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}}return i.\u0275fac=function(e){return new(e||i)(P(re),P(Ji),P(gt))},i.\u0275dir=z({type:i,selectors:[["","ngx-colors-trigger",""]],hostBindings:function(e,t){e&1&&T("click",function(){return t.onClick()})},inputs:{colorsAnimation:"colorsAnimation",palette:"palette",format:"format",formats:"formats",position:"position",hideTextInput:"hideTextInput",hideColorPicker:"hideColorPicker",attachTo:"attachTo",overlayClassName:"overlayClassName",colorPickerControls:"colorPickerControls",acceptLabel:"acceptLabel",cancelLabel:"cancelLabel"},outputs:{change:"change",input:"input",slider:"slider",close:"close",open:"open"},features:[ge([{provide:dt,useExisting:Ie(()=>i),multi:!0}])]}),i})(),en=(()=>{class i{constructor(e,t){this.cdRef=e,this.triggerDirective=t,this.triggerDirectiveColorChangeSubscription=null,this.color=this.triggerDirective.color}ngOnInit(){this.triggerDirectiveColorChangeSubscription=this.triggerDirective.change.subscribe(e=>{this.color=e,this.cdRef.markForCheck()})}ngOnDestroy(){this.triggerDirectiveColorChangeSubscription&&this.triggerDirectiveColorChangeSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(P(ve),P(Se,1))},i.\u0275cmp=oe({type:i,selectors:[["ngx-colors"]],decls:4,vars:5,consts:[[1,"app-color-picker"],[1,"preview"],[1,"preview-background"],[1,"circle",3,"ngStyle"]],template:function(e,t){e&1&&(A(0,"div",0)(1,"div",1)(2,"div",2),R(3,"div",3),M()()()),e&2&&(D(3),se("colornull",!t.color),k("ngStyle",Ft(3,Zi,t.color)))},dependencies:[et],styles:["[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]{line-height:1px;font-family:sans-serif}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{margin:2px;display:inline-block;box-sizing:border-box;border-radius:100%;background:white;cursor:pointer;padding:3px;box-shadow:0 1px 1px #0003,0 1px 1px 1px #00000024,0 1px 1px 1px #0000001f}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-background[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px;border-radius:100%}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{height:20px;width:20px;box-sizing:border-box;border-radius:100%;cursor:pointer}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .circle.colornull[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(236,236,236,.7) 0%,rgba(236,236,236,.7) 45%,#de0f00 50%,rgba(236,236,236,.7) 55%,rgba(236,236,236,.7) 100%)}[_nghost-%COMP%]   .app-color-picker[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .noselected[_ngcontent-%COMP%]{background-image:linear-gradient(45deg,#ccc 25%,transparent 25%),linear-gradient(-45deg,#ccc 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#ccc 75%),linear-gradient(-45deg,transparent 75%,#ccc 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0px}"]}),i})(),tn=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=$({type:i}),i.\u0275inj=K({providers:[gt,Ji],imports:[tt]}),i})();var po=["noteToolbarEl"];function go(i,n){if(i&1){let e=H();A(0,"mat-icon",3),G(1," color_lens "),A(2,"ngx-colors",4),oi("ngModelChange",function(o){I(e);let a=F();return ni(a.noteColor,o)||(a.noteColor=o),V(o)}),T("open",function(){I(e);let o=F();return V(o.onColorPickerOpen())}),M()(),A(3,"mat-icon",5),T("click",function(){I(e);let o=F();return V(o.toggleMediumEditorToolbar())}),G(4," type_specimen "),M(),A(5,"mat-icon",6),G(6," more_vert "),M()}if(i&2){let e=F();D(2),k("colorsAnimation","popup")("hideColorPicker",!0)("hideTextInput",!0)("palette",e.colorPickerPalette),ii("ngModel",e.noteColor)}}function vo(i,n){if(i&1){let e=H();A(0,"mat-icon",7),T("click",function(){I(e);let o=F();return V(o.toggleMediumEditorToolbar())}),G(1," close "),M()}}var vt=(()=>{let n=class n{constructor(){this.containerElement=Xt.required(),this.noteColor=ei.required(),this.noteToolbar=ce.required("noteToolbarEl"),this.colorsPickerDirective=ce.required(Se),this.colorPickerPalette=["#ffcdd2","#f8bbd0","#e1bee7","#d1c4e9","#c5cae9","#bbdefb","#b3e5fc","#b2ebf2","#b2dfdb","#c8e6c9","#dcedc8","#f0f4c3","#fff9c4","#ffecb3","#ffe0b2","#ffccbc","#d7ccc8","#fafafa","#cfd8dc",it.primaryColor]}get isMediumEditorToolbarOpen(){return this.containerElement().nativeElement.querySelector(".medium-editor-toolbar")?.classList.contains("open")??!1}ngOnInit(){this.setupMediumEditor();let t=this.getNoteToolbarBottom();this.toggleMediumToolbarOnKeyboardAppear(t),this.toggleCloseToolbarOnKeyboardAppear(t),this.triggerColorPickerManualClose()}setupMediumEditor(){let t=this.containerElement().nativeElement;new nn.default(t,{elementsContainer:t,disableEditing:!0,toolbar:{buttons:["bold","italic","underline","anchor","h1","h2","unorderedlist"],static:!0,sticky:!0,updateOnEmptySelection:!0}})}getNoteToolbarBottom(){let t=this.noteToolbar().nativeElement,a=getComputedStyle(t).getPropertyValue("bottom");return parseInt(a,10)}toggleMediumToolbarOnKeyboardAppear(t){visualViewport?.addEventListener("resize",o=>{let a=o.target.height,r=this.containerElement().nativeElement.querySelector(".medium-editor-toolbar");if(!r)throw new Error("Medium Editor toolbar not found");let s=r.offsetHeight,l=window.innerHeight-a-s;r.style.bottom=l<t?`${t}px`:`${l}px`})}toggleCloseToolbarOnKeyboardAppear(t){visualViewport?.addEventListener("resize",o=>{let a=o.target.height,d=this.noteToolbar().nativeElement;if(!d)throw new Error("Note toolbar not found");let r=d.offsetHeight,s=window.innerHeight-a-r;d.style.bottom=s<t?`${t}px`:`${s}px`})}onColorPickerOpen(){if(!visualViewport)return;let t=visualViewport.height,a=document.querySelector("ngx-colors-panel")?.querySelector(".opened");if(!a)throw new Error("Color panel not found");let d=this.noteToolbar().nativeElement,r=new ResizeObserver(()=>{let s=window.innerHeight-t-a.offsetHeight/2+d.offsetHeight/2,l=window.innerHeight===t;a.style.translate="0px "+(l?0:-s)+"px",r.disconnect()});r.observe(a)}triggerColorPickerManualClose(){visualViewport?.addEventListener("resize",t=>{if(!document.querySelector("ngx-colors-panel")?.querySelector(".opened"))return;let d=t.target.height;window.innerHeight===d&&this.colorsPickerDirective().closePanel()})}toggleMediumEditorToolbar(){let o=this.containerElement().nativeElement.querySelector(".medium-editor-toolbar");if(!o)throw new Error("Medium Editor toolbar not found");o.classList.contains("open")?o.classList.remove("open"):o.classList.add("open")}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=oe({type:n,selectors:[["app-note-toolbar"]],viewQuery:function(o,a){o&1&&(he(a.noteToolbar,po,5),he(a.colorsPickerDirective,Se,5)),o&2&&He(2)},inputs:{containerElement:[1,"containerElement"],noteColor:[1,"noteColor"]},outputs:{noteColor:"noteColorChange"},standalone:!0,features:[je],decls:4,vars:1,consts:[["noteToolbarEl",""],[1,"note_toolbar",3,"mousedown"],[1,"note_toolbar__icon","note_toolbar__close"],[1,"note_toolbar__icon","note_toolbar__lens"],["ngx-colors-trigger","",3,"ngModelChange","open","colorsAnimation","hideColorPicker","hideTextInput","palette","ngModel"],[1,"note_toolbar__icon","note_toolbar__open",3,"click"],[1,"note_toolbar__icon","note_toolbar__more"],[1,"note_toolbar__icon","note_toolbar__close",3,"click"]],template:function(o,a){if(o&1){let d=H();A(0,"div",1,0),T("mousedown",function(s){return I(d),V(s.preventDefault())}),W(2,go,7,5)(3,vo,2,0,"mat-icon",2),M()}o&2&&(D(2),Et(a.isMediumEditorToolbarOpen?3:2))},dependencies:[hi,ui,tn,en,Se,Oi,Ti,Lt],styles:[".note_toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:4px;position:absolute;bottom:10px;width:100%;height:50px}.note_toolbar__icon[_ngcontent-%COMP%]{height:50px;min-width:50px;display:flex;align-items:center;justify-content:center;background:var(--mat-primary);color:var(--mat-neutral);box-shadow:0 2px 2px #0000004d}.note_toolbar__lens[_ngcontent-%COMP%]{border-bottom-left-radius:5px;border-top-left-radius:5px}.note_toolbar__more[_ngcontent-%COMP%]{border-bottom-right-radius:5px;border-top-right-radius:5px}.note_toolbar__close[_ngcontent-%COMP%]{translate:-3px -54px}"]});let i=n;return i})();var bo=["noteContentFieldEl"],_o=["noteTitleEl"],yo=["noteContentEl"],Zr=(()=>{let n=class n{get noteTitleHtml(){return this.noteTitle().nativeElement.innerHTML}get noteContentHtml(){return this.noteContent().nativeElement.innerHTML}get noteColor(){return this.noteToolbar().noteColor()}get hasNoteChanged(){return this.currentNote.title!==this.noteTitleHtml||this.currentNote.content!==this.noteContentHtml||this.currentNote.hexColor!==this.noteColor}get isNewNote(){return this.currentNote.title===""&&this.currentNote.content===""}constructor(){this.noteContentField=ce.required("noteContentFieldEl"),this.noteTitle=ce.required("noteTitleEl"),this.noteContent=ce.required("noteContentEl"),this.noteToolbar=ce.required(vt),this.store=ye($i);let o=ye(di).snapshot.queryParamMap.get("id");if(!o)throw new Error("Note id not found");let a=this.store.getNoteById(o);this.currentNote=a??new ht(o)}ngOnDestroy(){this.updateNoteIfChanged(),this.cleanupEmptyNote()}updateNoteIfChanged(){this.hasNoteChanged&&(this.isNewNote||(this.currentNote.updatedAt=new Date),this.currentNote.title=this.noteTitleHtml,this.currentNote.content=this.noteContentHtml,this.currentNote.hexColor=this.noteColor,this.store.addNote(this.currentNote))}cleanupEmptyNote(){let t=!this.noteTitleHtml.trim(),o=!this.noteContentHtml.trim();t&&o&&this.store.deleteNote(this.currentNote.id)}};n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=oe({type:n,selectors:[["app-note"]],viewQuery:function(o,a){o&1&&(he(a.noteContentField,bo,5),he(a.noteTitle,_o,5),he(a.noteContent,yo,5),he(a.noteToolbar,vt,5)),o&2&&He(4)},hostBindings:function(o,a){o&1&&T("beforeunload",function(){return a.ngOnDestroy()},!1,Je)},standalone:!0,features:[je],decls:13,vars:4,consts:[["noteTitleEl",""],["noteContentFieldEl",""],["noteContentEl",""],[1,"note_form"],[1,"note_field","note_field__title"],[1,"note_title__label"],["contenteditable","true","spellcheck","false",1,"note_title__content",3,"innerHTML"],[1,"note_field","note_field__content"],[3,"containerElement","noteColor"],[1,"note_content__label"],["contenteditable","true","spellcheck","false",1,"note_content",3,"innerHTML"]],template:function(o,a){o&1&&(A(0,"form",3)(1,"div",4)(2,"mat-label",5),G(3,"Note Title"),M(),R(4,"div",6,0),M(),A(6,"div",7,1),R(8,"app-note-toolbar",8),A(9,"mat-label",9),G(10,"Leave a note"),M(),R(11,"div",10,2),M()()),o&2&&(D(4),k("innerHTML",a.currentNote.title,yt),D(4),k("containerElement",a.noteContentField())("noteColor",a.currentNote.hexColor),D(3),k("innerHTML",a.currentNote.content,yt))},dependencies:[Li,Ii,Pi,$e,Hi,zi,vt],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.note_form[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto 1fr;height:100%;outline:none}.note_title__label[_ngcontent-%COMP%], .note_content__label[_ngcontent-%COMP%]{color:var(--text-color-grey)}.note_title__label[_ngcontent-%COMP%], .note_title__content[_ngcontent-%COMP%]{font-size:var(--font-4);line-height:var(--line-height-4)}.note_title__content[_ngcontent-%COMP%]{min-height:var(--line-height-4)}.note_field__content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.note_content[_ngcontent-%COMP%]{flex-grow:1}"]});let i=n;return i})();export{$i as a,Zr as b};
